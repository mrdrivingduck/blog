import{_ as n,c as a,a as e,o as p}from"./app-BeHGwf2X.js";const t={};function l(o,s){return p(),a("div",null,s[0]||(s[0]=[e(`<h1 id="lsof" tabindex="-1"><a class="header-anchor" href="#lsof"><span>lsof</span></a></h1><p>Created by : Mr Dk.</p><p>2022 / 12 / 22 23:30 ğŸ‘</p><p>Hangzhou, Zhejiang, China</p><hr><h2 id="background" tabindex="-1"><a class="header-anchor" href="#background"><span>Background</span></a></h2><p><code>lsof</code>ï¼ˆlist open filesï¼‰ç”¨äºæŸ¥çœ‹å·²æ‰“å¼€çš„ <strong>æ–‡ä»¶</strong>ã€‚ç”±äº Linux ä¸­ä¸€åˆ‡çš†æ–‡ä»¶ï¼Œæ‰€ä»¥å®ƒå°†è¾“å‡ºä¸€åˆ‡å½¢å¼çš„å·²æ‰“å¼€æ–‡ä»¶ï¼š</p><ul><li>å¸¸è§„æ–‡ä»¶ã€ç›®å½•</li><li>å­—ç¬¦è®¾å¤‡ã€å—è®¾å¤‡</li><li>ç®¡é“</li><li>...</li></ul><h2 id="usage" tabindex="-1"><a class="header-anchor" href="#usage"><span>Usage</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">$ <span class="token function">lsof</span> <span class="token parameter variable">-h</span></span>
<span class="line"><span class="token function">lsof</span> <span class="token number">4.93</span>.2</span>
<span class="line"> latest revision: https://github.com/lsof-org/lsof</span>
<span class="line"> latest FAQ: https://github.com/lsof-org/lsof/blob/master/00FAQ</span>
<span class="line"> latest <span class="token punctuation">(</span>non-formatted<span class="token punctuation">)</span> <span class="token function">man</span> page: https://github.com/lsof-org/lsof/blob/master/Lsof.8</span>
<span class="line"> usage: <span class="token punctuation">[</span>-?abhKlnNoOPRtUvVX<span class="token punctuation">]</span> <span class="token punctuation">[</span>+<span class="token operator">|</span>-c c<span class="token punctuation">]</span> <span class="token punctuation">[</span>+<span class="token operator">|</span>-d s<span class="token punctuation">]</span> <span class="token punctuation">[</span>+D D<span class="token punctuation">]</span> <span class="token punctuation">[</span>+<span class="token operator">|</span>-E<span class="token punctuation">]</span> <span class="token punctuation">[</span>+<span class="token operator">|</span>-e s<span class="token punctuation">]</span> <span class="token punctuation">[</span>+<span class="token operator">|</span>-f<span class="token punctuation">[</span>gG<span class="token punctuation">]</span><span class="token punctuation">]</span></span>
<span class="line"> <span class="token punctuation">[</span>-F <span class="token punctuation">[</span>f<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>-g <span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>-i <span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>+<span class="token operator">|</span>-L <span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>+m <span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>+<span class="token operator">|</span>-M<span class="token punctuation">]</span> <span class="token punctuation">[</span>-o <span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>-p s<span class="token punctuation">]</span></span>
<span class="line"> <span class="token punctuation">[</span>+<span class="token operator">|</span>-r <span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>-s <span class="token punctuation">[</span>p:s<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>-S <span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>-T <span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>-u s<span class="token punctuation">]</span> <span class="token punctuation">[</span>+<span class="token operator">|</span>-w<span class="token punctuation">]</span> <span class="token punctuation">[</span>-x <span class="token punctuation">[</span>fl<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>--<span class="token punctuation">]</span> <span class="token punctuation">[</span>names<span class="token punctuation">]</span></span>
<span class="line">Defaults <span class="token keyword">in</span> parentheses<span class="token punctuation">;</span> comma-separated <span class="token builtin class-name">set</span> <span class="token punctuation">(</span>s<span class="token punctuation">)</span> items<span class="token punctuation">;</span> dash-separated ranges.</span>
<span class="line">  -?<span class="token operator">|</span>-h list <span class="token builtin class-name">help</span>          <span class="token parameter variable">-a</span> AND selections <span class="token punctuation">(</span>OR<span class="token punctuation">)</span>     <span class="token parameter variable">-b</span> avoid kernel blocks</span>
<span class="line">  <span class="token parameter variable">-c</span> c  cmd c ^c /c/<span class="token punctuation">[</span>bix<span class="token punctuation">]</span>  +c w  COMMAND width <span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span>    +d s  <span class="token function">dir</span> s files</span>
<span class="line">  <span class="token parameter variable">-d</span> s  <span class="token keyword">select</span> by FD <span class="token builtin class-name">set</span>   +D D  <span class="token function">dir</span> D tree *SLOW?*   +<span class="token operator">|</span>-e s  exempt s *RISKY*</span>
<span class="line">  <span class="token parameter variable">-i</span> <span class="token keyword">select</span> IPv<span class="token punctuation">[</span><span class="token number">46</span><span class="token punctuation">]</span> files  <span class="token parameter variable">-K</span> <span class="token punctuation">[</span>i<span class="token punctuation">]</span> list<span class="token operator">|</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>gn tasKs    <span class="token parameter variable">-l</span> list <span class="token environment constant">UID</span> numbers</span>
<span class="line">  <span class="token parameter variable">-n</span> no <span class="token function">host</span> names         <span class="token parameter variable">-N</span> <span class="token keyword">select</span> NFS files        <span class="token parameter variable">-o</span> list <span class="token function">file</span> offset</span>
<span class="line">  <span class="token parameter variable">-O</span> no overhead *RISKY*   <span class="token parameter variable">-P</span> no port names           <span class="token parameter variable">-R</span> list paRent PID</span>
<span class="line">  <span class="token parameter variable">-s</span> list <span class="token function">file</span> size        <span class="token parameter variable">-t</span> terse listing           <span class="token parameter variable">-T</span> disable TCP/TPI info</span>
<span class="line">  <span class="token parameter variable">-U</span> <span class="token keyword">select</span> Unix socket    <span class="token parameter variable">-v</span> list version info       <span class="token parameter variable">-V</span> verbose search</span>
<span class="line">  +<span class="token operator">|</span>-w  Warnings <span class="token punctuation">(</span>+<span class="token punctuation">)</span>       <span class="token parameter variable">-X</span> skip TCP<span class="token operator">&amp;</span>UDP* files     <span class="token parameter variable">-Z</span> Z  context <span class="token punctuation">[</span>Z<span class="token punctuation">]</span></span>
<span class="line">  -- end option scan</span>
<span class="line">  <span class="token parameter variable">-E</span> display endpoint info              +E display endpoint info and files</span>
<span class="line">  +f<span class="token operator">|</span>-f  +filesystem or <span class="token parameter variable">-file</span> names     +<span class="token operator">|</span>-f<span class="token punctuation">[</span>gG<span class="token punctuation">]</span> flaGs</span>
<span class="line">  <span class="token parameter variable">-F</span> <span class="token punctuation">[</span>f<span class="token punctuation">]</span> <span class="token keyword">select</span> fields<span class="token punctuation">;</span> -F? <span class="token keyword">for</span> <span class="token builtin class-name">help</span></span>
<span class="line">  +<span class="token operator">|</span>-L <span class="token punctuation">[</span>l<span class="token punctuation">]</span> list <span class="token punctuation">(</span>+<span class="token punctuation">)</span> suppress <span class="token punctuation">(</span>-<span class="token punctuation">)</span> <span class="token function">link</span> counts <span class="token operator">&lt;</span> l <span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">=</span> all<span class="token punctuation">;</span> default <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">                                        +m <span class="token punctuation">[</span>m<span class="token punctuation">]</span> use<span class="token operator">|</span>create <span class="token function">mount</span> supplement</span>
<span class="line">  +<span class="token operator">|</span>-M   portMap registration <span class="token punctuation">(</span>-<span class="token punctuation">)</span>       <span class="token parameter variable">-o</span> o   o 0t offset digits <span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token parameter variable">-p</span> s   exclude<span class="token punctuation">(</span>^<span class="token punctuation">)</span><span class="token operator">|</span><span class="token keyword">select</span> PIDs         <span class="token parameter variable">-S</span> <span class="token punctuation">[</span>t<span class="token punctuation">]</span> t second <span class="token function">stat</span> <span class="token function">timeout</span> <span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token parameter variable">-T</span> qs TCP/TPI Q,St <span class="token punctuation">(</span>s<span class="token punctuation">)</span> info</span>
<span class="line">  <span class="token parameter variable">-g</span> <span class="token punctuation">[</span>s<span class="token punctuation">]</span> exclude<span class="token punctuation">(</span>^<span class="token punctuation">)</span><span class="token operator">|</span><span class="token keyword">select</span> and print process group IDs</span>
<span class="line">  <span class="token parameter variable">-i</span> i   <span class="token keyword">select</span> by IPv<span class="token punctuation">[</span><span class="token number">46</span><span class="token punctuation">]</span> address: <span class="token punctuation">[</span><span class="token number">46</span><span class="token punctuation">]</span><span class="token punctuation">[</span>proto<span class="token punctuation">]</span><span class="token punctuation">[</span>@host<span class="token operator">|</span>addr<span class="token punctuation">]</span><span class="token punctuation">[</span>:svc_list<span class="token operator">|</span>port_list<span class="token punctuation">]</span></span>
<span class="line">  +<span class="token operator">|</span>-r <span class="token punctuation">[</span>t<span class="token punctuation">[</span>m<span class="token operator">&lt;</span>fmt<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">]</span> repeat every t seconds <span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  + <span class="token keyword">until</span> no files, - forever.</span>
<span class="line">       An optional suffix to t is m<span class="token operator">&lt;</span>fmt<span class="token operator">&gt;</span><span class="token punctuation">;</span> m must separate t from <span class="token operator">&lt;</span>fmt<span class="token operator">&gt;</span> and</span>
<span class="line">      <span class="token operator">&lt;</span>fmt<span class="token operator">&gt;</span> is an strftime<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token function">format</span> <span class="token keyword">for</span> the marker line.</span>
<span class="line">  <span class="token parameter variable">-s</span> p:s  exclude<span class="token punctuation">(</span>^<span class="token punctuation">)</span><span class="token operator">|</span><span class="token keyword">select</span> protocol <span class="token punctuation">(</span>p <span class="token operator">=</span> TCP<span class="token operator">|</span>UDP<span class="token punctuation">)</span> states by name<span class="token punctuation">(</span>s<span class="token punctuation">)</span>.</span>
<span class="line">  <span class="token parameter variable">-u</span> s   exclude<span class="token punctuation">(</span>^<span class="token punctuation">)</span><span class="token operator">|</span><span class="token keyword">select</span> login<span class="token operator">|</span><span class="token environment constant">UID</span> <span class="token builtin class-name">set</span> s</span>
<span class="line">  <span class="token parameter variable">-x</span> <span class="token punctuation">[</span>fl<span class="token punctuation">]</span> cross over +d<span class="token operator">|</span>+D File systems or symbolic Links</span>
<span class="line">  names  <span class="token keyword">select</span> named files or files on named <span class="token function">file</span> systems</span>
<span class="line">Anyone can list all files<span class="token punctuation">;</span> /dev warnings disabled<span class="token punctuation">;</span> kernel ID check disabled.</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœä¸åŠ ä»»ä½•å‚æ•°ï¼Œå°†è¾“å‡ºå¤§ä¸€å †çœ‹ä¹Ÿçœ‹ä¸å®Œçš„ä¿¡æ¯ã€‚æ‰€ä»¥å…ˆæŒ‰åˆ—æ¥æ‹ä¸€æ‹æ¯åˆ—çš„å«ä¹‰ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">$ <span class="token function">lsof</span> <span class="token operator">|</span> <span class="token function">head</span> <span class="token parameter variable">-n</span> <span class="token number">5</span></span>
<span class="line">COMMAND       PID     TID TASKCMD              <span class="token environment constant">USER</span>   FD      TYPE             DEVICE SIZE/OFF       NODE NAME</span>
<span class="line">systemd         <span class="token number">1</span>                              root  cwd       DIR              <span class="token number">252,2</span>     <span class="token number">4096</span>          <span class="token number">2</span> /</span>
<span class="line">systemd         <span class="token number">1</span>                              root  rtd       DIR              <span class="token number">252,2</span>     <span class="token number">4096</span>          <span class="token number">2</span> /</span>
<span class="line">systemd         <span class="token number">1</span>                              root  txt       REG              <span class="token number">252,2</span>  <span class="token number">1620224</span>     <span class="token number">139845</span> /usr/lib/systemd/systemd</span>
<span class="line">systemd         <span class="token number">1</span>                              root  mem       REG              <span class="token number">252,2</span>  <span class="token number">1369384</span>     <span class="token number">140226</span> /usr/lib/x86_64-linux-gnu/libm-2.31.so</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶ä¸­ï¼š</p><ul><li><code>COMMAND</code> åˆ—æ˜¾ç¤ºä¸è¯¥è¿›ç¨‹ç›¸å…³çš„ UNIX å‘½ä»¤çš„å‰ä¹ä¸ªå­—ç¬¦</li><li><code>PID</code> / <code>TID</code> åˆ—æ˜¾ç¤ºè¿›ç¨‹å· / çº¿ç¨‹å·</li><li><code>TASKCMD</code>ï¼šä»»åŠ¡å‘½ä»¤åï¼Œåœ¨ Linux ä¸Šå¯ä»¥ä¸ <code>COMMAND</code> ä¸åŒ</li><li><code>USER</code> åˆ—æ˜¾ç¤ºè¿›ç¨‹æ‰€å±ç”¨æˆ·</li><li><code>FD</code> åˆ—æ˜¾ç¤ºæ–‡ä»¶æè¿°ç¬¦ç¼–å·ï¼ˆæ™®é€šæ–‡ä»¶ï¼‰ï¼Œæˆ–ï¼š <ul><li><code>cwd</code>ï¼šå½“å‰å·¥ä½œç›®å½•</li><li><code>rtd</code>ï¼šæ ¹ç›®å½•</li><li><code>pd</code>ï¼šçˆ¶ç›®å½•</li><li><code>mem</code>ï¼šå†…å­˜æ˜ å°„æ–‡ä»¶</li><li><code>mmap</code>ï¼šå†…å­˜æ˜ å°„è®¾å¤‡</li><li><code>txt</code>ï¼šç¨‹åºä»£ç æˆ–æ•°æ®</li><li>...</li></ul></li><li><code>TYPE</code> åˆ—æ˜¾ç¤ºè¯¥æ–‡ä»¶çš„ç±»å‹ï¼š <ul><li><code>DIR</code>ï¼šç›®å½•</li><li><code>REG</code>ï¼šæ™®é€šæ–‡ä»¶</li><li><code>PIPE</code>ï¼šç®¡é“</li><li><code>LINK</code>ï¼šç¬¦å·é“¾æ¥</li><li><code>IPv4</code></li><li><code>IPv6</code></li><li>...</li></ul></li><li><code>DEVICE</code> åˆ—æ˜¾ç¤ºè®¾å¤‡ç¼–å·</li><li><code>SIZE/OFF</code> åˆ—è·å–æ–‡ä»¶çš„å¤§å°æˆ–å½“å‰åç§»ï¼ˆå¦‚æœå¯ä»¥è·å–ï¼‰</li><li><code>NODE</code> åˆ—æ˜¾ç¤ºèŠ‚ç‚¹ç¼–å·ï¼ˆä¸åŒç±»å‹çš„æ–‡ä»¶æœ‰ä¸åŒçš„å«ä¹‰ï¼‰</li><li><code>NAME</code> åˆ—æ˜¾ç¤ºæ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶ç³»ç»Ÿçš„æŒ‚è½½ç‚¹</li></ul><h3 id="æŒ‰è¿›ç¨‹å·è¿‡æ»¤" tabindex="-1"><a class="header-anchor" href="#æŒ‰è¿›ç¨‹å·è¿‡æ»¤"><span>æŒ‰è¿›ç¨‹å·è¿‡æ»¤</span></a></h3><p>ä½¿ç”¨ <code>-p</code> å‚æ•°åªæ˜¾ç¤ºæŸä¸ªè¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶ã€‚æ¯”å¦‚ç”¨ <code>vim</code> æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ <code>a.txt</code>ï¼Œç„¶ååœ¨å¦ä¸€ä¸ªçª—å£é€šè¿‡ <code>ps</code> æ‰¾åˆ°è¿™ä¸ªè¿›ç¨‹çš„ pidï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">$ <span class="token function">lsof</span> <span class="token parameter variable">-p</span> <span class="token number">2757806</span></span>
<span class="line">COMMAND     PID <span class="token environment constant">USER</span>   FD   TYPE DEVICE SIZE/OFF   NODE NAME</span>
<span class="line"><span class="token function">vim</span>     <span class="token number">2757806</span> root  cwd    DIR  <span class="token number">252,2</span>     <span class="token number">4096</span>     <span class="token number">19</span> /root</span>
<span class="line"><span class="token function">vim</span>     <span class="token number">2757806</span> root  rtd    DIR  <span class="token number">252,2</span>     <span class="token number">4096</span>      <span class="token number">2</span> /</span>
<span class="line"><span class="token function">vim</span>     <span class="token number">2757806</span> root  txt    REG  <span class="token number">252,2</span>  <span class="token number">2906824</span> <span class="token number">131279</span> /usr/bin/vim.basic</span>
<span class="line"><span class="token function">vim</span>     <span class="token number">2757806</span> root  mem    REG  <span class="token number">252,2</span>    <span class="token number">51856</span> <span class="token number">140272</span> /usr/lib/x86_64-linux-gnu/libnss_files-2.31.so</span>
<span class="line"><span class="token function">vim</span>     <span class="token number">2757806</span> root  mem    REG  <span class="token number">252,2</span>  <span class="token number">3035952</span> <span class="token number">131313</span> /usr/lib/locale/locale-archive</span>
<span class="line"><span class="token function">vim</span>     <span class="token number">2757806</span> root  mem    REG  <span class="token number">252,2</span>    <span class="token number">47064</span> <span class="token number">138541</span> /usr/lib/x86_64-linux-gnu/libogg.so.0.8.4</span>
<span class="line"><span class="token function">vim</span>     <span class="token number">2757806</span> root  mem    REG  <span class="token number">252,2</span>   <span class="token number">182344</span> <span class="token number">138629</span> /usr/lib/x86_64-linux-gnu/libvorbis.so.0.4.8</span>
<span class="line"><span class="token function">vim</span>     <span class="token number">2757806</span> root  mem    REG  <span class="token number">252,2</span>    <span class="token number">14880</span> <span class="token number">140397</span> /usr/lib/x86_64-linux-gnu/libutil-2.31.so</span>
<span class="line"><span class="token function">vim</span>     <span class="token number">2757806</span> root  mem    REG  <span class="token number">252,2</span>   <span class="token number">108936</span> <span class="token number">131566</span> /usr/lib/x86_64-linux-gnu/libz.so.1.2.11</span>
<span class="line"><span class="token function">vim</span>     <span class="token number">2757806</span> root  mem    REG  <span class="token number">252,2</span>   <span class="token number">182560</span> <span class="token number">131219</span> /usr/lib/x86_64-linux-gnu/libexpat.so.1.6.11</span>
<span class="line"><span class="token function">vim</span>     <span class="token number">2757806</span> root  mem    REG  <span class="token number">252,2</span>    <span class="token number">39368</span> <span class="token number">138503</span> /usr/lib/x86_64-linux-gnu/libltdl.so.7.3.1</span>
<span class="line"><span class="token function">vim</span>     <span class="token number">2757806</span> root  mem    REG  <span class="token number">252,2</span>   <span class="token number">100520</span> <span class="token number">138577</span> /usr/lib/x86_64-linux-gnu/libtdb.so.1.4.3</span>
<span class="line"><span class="token function">vim</span>     <span class="token number">2757806</span> root  mem    REG  <span class="token number">252,2</span>    <span class="token number">38904</span> <span class="token number">138630</span> /usr/lib/x86_64-linux-gnu/libvorbisfile.so.3.3.7</span>
<span class="line"><span class="token function">vim</span>     <span class="token number">2757806</span> root  mem    REG  <span class="token number">252,2</span>   <span class="token number">584392</span> <span class="token number">138554</span> /usr/lib/x86_64-linux-gnu/libpcre2-8.so.0.9.0</span>
<span class="line"><span class="token function">vim</span>     <span class="token number">2757806</span> root  mem    REG  <span class="token number">252,2</span>  <span class="token number">2029592</span> <span class="token number">131261</span> /usr/lib/x86_64-linux-gnu/libc-2.31.so</span>
<span class="line"><span class="token function">vim</span>     <span class="token number">2757806</span> root  mem    REG  <span class="token number">252,2</span>   <span class="token number">157224</span> <span class="token number">140375</span> /usr/lib/x86_64-linux-gnu/libpthread-2.31.so</span>
<span class="line"><span class="token function">vim</span>     <span class="token number">2757806</span> root  mem    REG  <span class="token number">252,2</span>  <span class="token number">5449112</span> <span class="token number">132283</span> /usr/lib/x86_64-linux-gnu/libpython3.8.so.1.0</span>
<span class="line"><span class="token function">vim</span>     <span class="token number">2757806</span> root  mem    REG  <span class="token number">252,2</span>    <span class="token number">18848</span> <span class="token number">140219</span> /usr/lib/x86_64-linux-gnu/libdl-2.31.so</span>
<span class="line"><span class="token function">vim</span>     <span class="token number">2757806</span> root  mem    REG  <span class="token number">252,2</span>    <span class="token number">22456</span> <span class="token number">138457</span> /usr/lib/x86_64-linux-gnu/libgpm.so.2</span>
<span class="line"><span class="token function">vim</span>     <span class="token number">2757806</span> root  mem    REG  <span class="token number">252,2</span>    <span class="token number">39088</span> <span class="token number">138376</span> /usr/lib/x86_64-linux-gnu/libacl.so.1.1.2253</span>
<span class="line"><span class="token function">vim</span>     <span class="token number">2757806</span> root  mem    REG  <span class="token number">252,2</span>    <span class="token number">71680</span> <span class="token number">138399</span> /usr/lib/x86_64-linux-gnu/libcanberra.so.0.2.5</span>
<span class="line"><span class="token function">vim</span>     <span class="token number">2757806</span> root  mem    REG  <span class="token number">252,2</span>   <span class="token number">163200</span> <span class="token number">138579</span> /usr/lib/x86_64-linux-gnu/libselinux.so.1</span>
<span class="line"><span class="token function">vim</span>     <span class="token number">2757806</span> root  mem    REG  <span class="token number">252,2</span>   <span class="token number">192032</span> <span class="token number">138600</span> /usr/lib/x86_64-linux-gnu/libtinfo.so.6.2</span>
<span class="line"><span class="token function">vim</span>     <span class="token number">2757806</span> root  mem    REG  <span class="token number">252,2</span>  <span class="token number">1369384</span> <span class="token number">140226</span> /usr/lib/x86_64-linux-gnu/libm-2.31.so</span>
<span class="line"><span class="token function">vim</span>     <span class="token number">2757806</span> root  mem    REG  <span class="token number">252,2</span>   <span class="token number">191504</span> <span class="token number">130833</span> /usr/lib/x86_64-linux-gnu/ld-2.31.so</span>
<span class="line"><span class="token function">vim</span>     <span class="token number">2757806</span> root    0u   CHR  <span class="token number">136,0</span>      0t0      <span class="token number">3</span> /dev/pts/0</span>
<span class="line"><span class="token function">vim</span>     <span class="token number">2757806</span> root    1u   CHR  <span class="token number">136,0</span>      0t0      <span class="token number">3</span> /dev/pts/0</span>
<span class="line"><span class="token function">vim</span>     <span class="token number">2757806</span> root    2u   CHR  <span class="token number">136,0</span>      0t0      <span class="token number">3</span> /dev/pts/0</span>
<span class="line"><span class="token function">vim</span>     <span class="token number">2757806</span> root    4u   REG  <span class="token number">252,2</span>    <span class="token number">12288</span>     <span class="token number">52</span> /root/.a.txt.swp</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ° <code>vim</code> è¿›ç¨‹æ‰“å¼€äº†ï¼š</p><ul><li>å½“å‰ç›®å½•å’Œæ ¹ç›®å½•ï¼ˆåº”è¯¥æ˜¯ç»§æ‰¿è‡ª shellï¼‰</li><li><code>vim.basic</code> ç¨‹åº</li><li>ä¸€å¤§å †å…±äº«åº“ï¼ˆå†…å­˜æ˜ å°„ï¼‰</li><li>åœ¨å­—ç¬¦è®¾å¤‡ä¸Šæ‰“å¼€äº†ä¸‰ä¸ªæ–‡ä»¶ï¼Œæè¿°ç¬¦åˆ†åˆ«ä¸º 0ã€1ã€2ï¼ˆæ ‡å‡†è¾“å…¥ã€è¾“å‡ºã€é”™è¯¯æµï¼‰</li><li>æ‰“å¼€äº† <code>.a.txt.swp</code> swap æ–‡ä»¶</li></ul><h3 id="æŒ‰è¿›ç¨‹åè¿‡æ»¤" tabindex="-1"><a class="header-anchor" href="#æŒ‰è¿›ç¨‹åè¿‡æ»¤"><span>æŒ‰è¿›ç¨‹åè¿‡æ»¤</span></a></h3><p>ä½¿ç”¨ <code>-c</code> å‚æ•°æŒ‰ <code>COMMAND</code> åˆ—è¿‡æ»¤è¾“å‡ºã€‚</p><h3 id="æŒ‰ç”¨æˆ·è¿‡æ»¤" tabindex="-1"><a class="header-anchor" href="#æŒ‰ç”¨æˆ·è¿‡æ»¤"><span>æŒ‰ç”¨æˆ·è¿‡æ»¤</span></a></h3><p>ä½¿ç”¨ <code>-u</code> å‚æ•°æŒ‰ <code>USER</code> åˆ—è¿‡æ»¤è¾“å‡ºã€‚</p><h3 id="æŸ¥çœ‹ç½‘ç»œè¿æ¥" tabindex="-1"><a class="header-anchor" href="#æŸ¥çœ‹ç½‘ç»œè¿æ¥"><span>æŸ¥çœ‹ç½‘ç»œè¿æ¥</span></a></h3><p>ä½¿ç”¨ <code>-i</code> å‚æ•°å¯ä»¥æŸ¥çœ‹æ‰€æœ‰ç½‘ç»œè¿æ¥ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">$ <span class="token function">lsof</span> <span class="token parameter variable">-i</span></span>
<span class="line">COMMAND       PID            <span class="token environment constant">USER</span>   FD   TYPE    DEVICE SIZE/OFF NODE NAME</span>
<span class="line">systemd         <span class="token number">1</span>            root   54u  IPv4     <span class="token number">15244</span>      0t0  TCP *:sunrpc <span class="token punctuation">(</span>LISTEN<span class="token punctuation">)</span></span>
<span class="line">systemd         <span class="token number">1</span>            root   55u  IPv4     <span class="token number">15245</span>      0t0  UDP *:sunrpc</span>
<span class="line">systemd         <span class="token number">1</span>            root   56u  IPv6     <span class="token number">15248</span>      0t0  TCP *:sunrpc <span class="token punctuation">(</span>LISTEN<span class="token punctuation">)</span></span>
<span class="line">systemd         <span class="token number">1</span>            root   57u  IPv6     <span class="token number">15251</span>      0t0  UDP *:sunrpc</span>
<span class="line">rpcbind       <span class="token number">706</span>            _rpc    4u  IPv4     <span class="token number">15244</span>      0t0  TCP *:sunrpc <span class="token punctuation">(</span>LISTEN<span class="token punctuation">)</span></span>
<span class="line">rpcbind       <span class="token number">706</span>            _rpc    5u  IPv4     <span class="token number">15245</span>      0t0  UDP *:sunrpc</span>
<span class="line">rpcbind       <span class="token number">706</span>            _rpc    6u  IPv6     <span class="token number">15248</span>      0t0  TCP *:sunrpc <span class="token punctuation">(</span>LISTEN<span class="token punctuation">)</span></span>
<span class="line">rpcbind       <span class="token number">706</span>            _rpc    7u  IPv6     <span class="token number">15251</span>      0t0  UDP *:sunrpc</span>
<span class="line">systemd-n     <span class="token number">744</span> systemd-network   19u  IPv4     <span class="token number">21626</span>      0t0  UDP nat:bootpc</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†åŠ ä¸Š <code>tcp</code> / <code>udp</code> å¯ä»¥æŸ¥çœ‹æ‰€æœ‰çš„ TCP / UDP ç½‘ç»œè¿æ¥ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">$ <span class="token function">lsof</span> <span class="token parameter variable">-i</span> tcp <span class="token operator">|</span> <span class="token function">tail</span> <span class="token parameter variable">-n</span> <span class="token number">1</span></span>
<span class="line">sshd      <span class="token number">2757815</span>            root    4u  IPv4 <span class="token number">190764835</span>      0t0  TCP nat:ssh-<span class="token operator">&gt;</span><span class="token number">112.10</span>.217.238:48291 <span class="token punctuation">(</span>ESTABLISHED<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œçš„ç«¯å£å·è¢«ç¿»è¯‘ä¸ºå¸¸ç”¨ç«¯å£åç§°ã€‚å¯ä»¥åŠ ä¸€ä¸ª <code>:</code> æŒ‰ç«¯å£å·æˆ–ç«¯å£èŒƒå›´æ¥è¿‡æ»¤ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">$ <span class="token function">lsof</span> <span class="token parameter variable">-i</span> tcp:22</span>
<span class="line">COMMAND     PID <span class="token environment constant">USER</span>   FD   TYPE    DEVICE SIZE/OFF NODE NAME</span>
<span class="line">sshd        <span class="token number">867</span> root    3u  IPv4     <span class="token number">24169</span>      0t0  TCP *:ssh <span class="token punctuation">(</span>LISTEN<span class="token punctuation">)</span></span>
<span class="line">sshd        <span class="token number">867</span> root    4u  IPv6     <span class="token number">24180</span>      0t0  TCP *:ssh <span class="token punctuation">(</span>LISTEN<span class="token punctuation">)</span></span>
<span class="line">sshd    <span class="token number">2757815</span> root    4u  IPv4 <span class="token number">190764835</span>      0t0  TCP nat:ssh-<span class="token operator">&gt;</span><span class="token number">112.10</span>.217.238:48291 <span class="token punctuation">(</span>ESTABLISHED<span class="token punctuation">)</span></span>
<span class="line">sshd    <span class="token number">2761102</span> root    4u  IPv4 <span class="token number">190787885</span>      0t0  TCP nat:ssh-<span class="token operator">&gt;</span><span class="token number">112.5</span>.81.26:32966 <span class="token punctuation">(</span>ESTABLISHED<span class="token punctuation">)</span></span>
<span class="line">sshd    <span class="token number">2761103</span> sshd    4u  IPv4 <span class="token number">190787885</span>      0t0  TCP nat:ssh-<span class="token operator">&gt;</span><span class="token number">112.5</span>.81.26:32966 <span class="token punctuation">(</span>ESTABLISHED<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">$ <span class="token function">lsof</span> <span class="token parameter variable">-i</span> tcp:20-23</span>
<span class="line">COMMAND     PID <span class="token environment constant">USER</span>   FD   TYPE    DEVICE SIZE/OFF NODE NAME</span>
<span class="line">sshd        <span class="token number">867</span> root    3u  IPv4     <span class="token number">24169</span>      0t0  TCP *:ssh <span class="token punctuation">(</span>LISTEN<span class="token punctuation">)</span></span>
<span class="line">sshd        <span class="token number">867</span> root    4u  IPv6     <span class="token number">24180</span>      0t0  TCP *:ssh <span class="token punctuation">(</span>LISTEN<span class="token punctuation">)</span></span>
<span class="line">sshd    <span class="token number">2757815</span> root    4u  IPv4 <span class="token number">190764835</span>      0t0  TCP nat:ssh-<span class="token operator">&gt;</span><span class="token number">112.10</span>.217.238:48291 <span class="token punctuation">(</span>ESTABLISHED<span class="token punctuation">)</span></span>
<span class="line">sshd    <span class="token number">2761187</span> root    4u  IPv4 <span class="token number">190788164</span>      0t0  TCP nat:ssh-<span class="token operator">&gt;</span><span class="token number">138.2</span>.152.212:48566 <span class="token punctuation">(</span>ESTABLISHED<span class="token punctuation">)</span></span>
<span class="line">sshd    <span class="token number">2761188</span> sshd    4u  IPv4 <span class="token number">190788164</span>      0t0  TCP nat:ssh-<span class="token operator">&gt;</span><span class="token number">138.2</span>.152.212:48566 <span class="token punctuation">(</span>ESTABLISHED<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="åªæ˜¾ç¤ºè¿›ç¨‹å·" tabindex="-1"><a class="header-anchor" href="#åªæ˜¾ç¤ºè¿›ç¨‹å·"><span>åªæ˜¾ç¤ºè¿›ç¨‹å·</span></a></h3><p><code>-t</code> å‚æ•°å¯ä»¥åªè¾“å‡ºè¿›ç¨‹å·ã€‚è¿™ä¸ªé€‰é¡¹å¯ä»¥å’Œ <code>kill</code> ç»“åˆä½¿ç”¨ã€‚æ¯”å¦‚è¯´å¹²æ‰æŸä¸ªç”¨æˆ·æ‰€æœ‰å·²ç»æ‰“å¼€æ–‡ä»¶çš„è¿›ç¨‹ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">kill</span> <span class="token parameter variable">-9</span> <span class="token variable"><span class="token variable">\`</span><span class="token function">lsof</span> <span class="token parameter variable">-t</span> <span class="token parameter variable">-u</span> xxx<span class="token variable">\`</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="å‘¨æœŸè¿è¡Œ-ç›‘æ§" tabindex="-1"><a class="header-anchor" href="#å‘¨æœŸè¿è¡Œ-ç›‘æ§"><span>å‘¨æœŸè¿è¡Œï¼ˆç›‘æ§ï¼‰</span></a></h3><p>ä½¿ç”¨ <code>-r</code> å‚æ•°å¯ä»¥æŒ‡å®šé—´éš”è¿è¡Œçš„ç§’æ•°ã€‚</p><h2 id="references" tabindex="-1"><a class="header-anchor" href="#references"><span>References</span></a></h2><p><a href="https://linuxtools-rst.readthedocs.io/zh_CN/latest/tool/lsof.html" target="_blank" rel="noopener noreferrer">lsof ä¸€åˆ‡çš†æ–‡ä»¶</a></p><p><a href="https://linux.cn/article-4099-1.html" target="_blank" rel="noopener noreferrer">Linux å‘½ä»¤ç¥å™¨ï¼šlsof å…¥é—¨</a></p><p><a href="https://man7.org/linux/man-pages/man8/lsof.8.html" target="_blank" rel="noopener noreferrer">lsof(8) â€” Linux manual page</a></p>`,39)]))}const i=n(t,[["render",l],["__file","lsof.html.vue"]]),u=JSON.parse('{"path":"/notes/Linux/lsof.html","title":"lsof","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"Background","slug":"background","link":"#background","children":[]},{"level":2,"title":"Usage","slug":"usage","link":"#usage","children":[{"level":3,"title":"æŒ‰è¿›ç¨‹å·è¿‡æ»¤","slug":"æŒ‰è¿›ç¨‹å·è¿‡æ»¤","link":"#æŒ‰è¿›ç¨‹å·è¿‡æ»¤","children":[]},{"level":3,"title":"æŒ‰è¿›ç¨‹åè¿‡æ»¤","slug":"æŒ‰è¿›ç¨‹åè¿‡æ»¤","link":"#æŒ‰è¿›ç¨‹åè¿‡æ»¤","children":[]},{"level":3,"title":"æŒ‰ç”¨æˆ·è¿‡æ»¤","slug":"æŒ‰ç”¨æˆ·è¿‡æ»¤","link":"#æŒ‰ç”¨æˆ·è¿‡æ»¤","children":[]},{"level":3,"title":"æŸ¥çœ‹ç½‘ç»œè¿æ¥","slug":"æŸ¥çœ‹ç½‘ç»œè¿æ¥","link":"#æŸ¥çœ‹ç½‘ç»œè¿æ¥","children":[]},{"level":3,"title":"åªæ˜¾ç¤ºè¿›ç¨‹å·","slug":"åªæ˜¾ç¤ºè¿›ç¨‹å·","link":"#åªæ˜¾ç¤ºè¿›ç¨‹å·","children":[]},{"level":3,"title":"å‘¨æœŸè¿è¡Œï¼ˆç›‘æ§ï¼‰","slug":"å‘¨æœŸè¿è¡Œ-ç›‘æ§","link":"#å‘¨æœŸè¿è¡Œ-ç›‘æ§","children":[]}]},{"level":2,"title":"References","slug":"references","link":"#references","children":[]}],"git":{},"filePathRelative":"notes/Linux/lsof.md"}');export{i as comp,u as data};
