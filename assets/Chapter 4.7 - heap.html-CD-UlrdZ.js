import{_ as n,c as a,a as p,o as e}from"./app-BeHGwf2X.js";const t={};function c(o,s){return e(),a("div",null,s[0]||(s[0]=[p(`<h1 id="chapter-4-7-heap" tabindex="-1"><a class="header-anchor" href="#chapter-4-7-heap"><span>Chapter 4.7 - heap</span></a></h1><p>Created by : Mr Dk.</p><p>2021 / 04 / 04 15:42 ğŸ€</p><p>Nanjing, Jiangsu, China</p><hr><h2 id="_4-7-1-heap-æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#_4-7-1-heap-æ¦‚è¿°"><span>4.7.1 heap æ¦‚è¿°</span></a></h2><p>heap ä¸å±äº SQL å®¹å™¨ç»„ä»¶ï¼Œè€Œæ˜¯ä¸€ç§ç»„ç»‡æ•°æ®çš„æ–¹å¼ï¼Œç”¨äºå®ç° priority_queueã€‚ä¼˜å…ˆé˜Ÿåˆ—å…è®¸ç”¨äºä»¥ä»»æ„é¡ºåºå°†å…ƒç´  push åˆ°å®¹å™¨å†…ï¼Œä½†å–å‡ºæ—¶ä¸€å®šä»æœ€é«˜ä¼˜å…ˆçº§çš„æ•°æ®å¼€å§‹å–å‡ºã€‚</p><p>å¦‚æœä½¿ç”¨å¹³è¡¡äºŒå‰æ ‘æ¥ç»´æŠ¤æ‰€æœ‰å…ƒç´ ï¼Œä»£ä»·æœ‰äº›é«˜ã€‚å› ä¸ºä¼˜å…ˆé˜Ÿåˆ—å¹¶ä¸è¦æ±‚å…ƒç´ æ•´ä½“æœ‰åºï¼Œæ¯æ¬¡åªéœ€è¦å–å‡ºæœ€å¤§çš„é‚£ä¸ªå…ƒç´ å³å¯ï¼Œä¸éœ€è¦å…¶å®ƒå…ƒç´ ä¹‹é—´æœ‰åºã€‚äºŒå‰å †æ˜¯ä¸€é¢—å®Œå…¨äºŒå‰æ ‘ï¼Œæ»¡è¶³æ•ˆç‡å’Œä»£ä»·çš„æŠ˜è¡·ã€‚å®Œå…¨äºŒå‰æ ‘çš„æ ‘å†…æ²¡æœ‰æ´ï¼Œå› æ­¤å¯ä»¥ç›´æ¥ä½¿ç”¨çº¿æ€§æ•°ç»„æ¥å­˜å‚¨ç»“ç‚¹ï¼Œå¹¶ä¸”é€šè¿‡æ•°ç»„ä¸‹æ ‡çš„å€æ•°å…³ç³»æ–¹ä¾¿åœ°å–å¾—å·¦å³å­©å­ç»“ç‚¹å’Œçˆ¶ç»“ç‚¹ã€‚</p><p>è¿™æ ·ä¸€æ¥ï¼Œåªéœ€è¦ï¼š</p><ul><li>ä¸€ä¸ªæ•°ç»„</li><li>ä¸€ç»„ heap ç®—æ³•</li></ul><p>å°±èƒ½å¤Ÿå®ç°å †ã€‚å †å¯ä»¥è¢«åˆ†ä¸º max-heap å’Œ min-heapã€‚STL æä¾›çš„æ˜¯ max-heapã€‚</p><h2 id="_4-7-2-heap-ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#_4-7-2-heap-ç®—æ³•"><span>4.7.2 heap ç®—æ³•</span></a></h2><h3 id="push-heap-ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#push-heap-ç®—æ³•"><span><code>push_heap</code> ç®—æ³•</span></a></h3><p>è¯¥ç®—æ³•é»˜è®¤æ–°çš„å…ƒç´ å·²ç»è¢«æ’å…¥åœ¨åº•å±‚ç»“æ„çš„ <code>end()</code> è¿­ä»£å™¨æ‰€åœ¨çš„ä½ç½®ä¸Šã€‚ä¸ºäº†è®©è¿™ä¸ªæ–°å…ƒç´ æ»¡è¶³å †çš„å®šä¹‰ï¼Œéœ€è¦å¯¹è¯¥ç»“ç‚¹æ‰§è¡Œä¸€ä¸ª <em>ä¸Šæµ® (percolate up)</em> æ“ä½œï¼Œç›´åˆ°è¯¥å…ƒç´ çš„çˆ¶ç»“ç‚¹æ¯”è¯¥å…ƒç´ å¤§ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp" data-title="cpp"><pre><code><span class="line"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">_RandomAccessIterator</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">_Compare</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">inline</span> <span class="token keyword">void</span></span>
<span class="line"><span class="token function">push_heap</span><span class="token punctuation">(</span>_RandomAccessIterator __first<span class="token punctuation">,</span> _RandomAccessIterator __last<span class="token punctuation">,</span></span>
<span class="line">          _Compare __comp<span class="token punctuation">)</span> <span class="token comment">// å¤´å°¾è¿­ä»£å™¨æŒ‡ç¤ºåŒºé—´ï¼Œå…¶ä¸­æœ€åä¸€ä¸ªå…ƒç´ æ˜¯æ–°æ’å…¥çš„ï¼›comp è¡¨ç¤ºæ¯”è¾ƒæ–¹å¼</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">__STL_REQUIRES</span><span class="token punctuation">(</span>_RandomAccessIterator<span class="token punctuation">,</span> _Mutable_RandomAccessIterator<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token function">__push_heap_aux</span><span class="token punctuation">(</span>__first<span class="token punctuation">,</span> __last<span class="token punctuation">,</span> __comp<span class="token punctuation">,</span></span>
<span class="line">                  <span class="token function">__DISTANCE_TYPE</span><span class="token punctuation">(</span>__first<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">__VALUE_TYPE</span><span class="token punctuation">(</span>__first<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp" data-title="cpp"><pre><code><span class="line"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">_RandomAccessIterator</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">_Distance</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">_Tp</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">inline</span> <span class="token keyword">void</span></span>
<span class="line"><span class="token function">__push_heap_aux</span><span class="token punctuation">(</span>_RandomAccessIterator __first<span class="token punctuation">,</span></span>
<span class="line">                _RandomAccessIterator __last<span class="token punctuation">,</span> _Distance<span class="token operator">*</span><span class="token punctuation">,</span> _Tp<span class="token operator">*</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">__push_heap</span><span class="token punctuation">(</span>__first<span class="token punctuation">,</span> <span class="token function">_Distance</span><span class="token punctuation">(</span><span class="token punctuation">(</span>__last <span class="token operator">-</span> __first<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">_Distance</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">              <span class="token function">_Tp</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">(</span>__last <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æŒ‡æ˜å †çš„æœ‰æ•ˆåŒºé—´ï¼Œä»¥åŠæœ€åä¸€ä¸ªä½ç½®çš„å…ƒç´ </span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp" data-title="cpp"><pre><code><span class="line"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">_RandomAccessIterator</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">_Distance</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">_Tp</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">void</span></span>
<span class="line"><span class="token function">__push_heap</span><span class="token punctuation">(</span>_RandomAccessIterator __first<span class="token punctuation">,</span></span>
<span class="line">            _Distance __holeIndex<span class="token punctuation">,</span> _Distance __topIndex<span class="token punctuation">,</span> _Tp __value<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  _Distance __parent <span class="token operator">=</span> <span class="token punctuation">(</span>__holeIndex <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// æœ€åä¸€ä¸ªå…ƒç´ çš„çˆ¶ç»“ç‚¹</span></span>
<span class="line">  <span class="token keyword">while</span> <span class="token punctuation">(</span>__holeIndex <span class="token operator">&gt;</span> __topIndex <span class="token operator">&amp;&amp;</span> <span class="token operator">*</span><span class="token punctuation">(</span>__first <span class="token operator">+</span> __parent<span class="token punctuation">)</span> <span class="token operator">&lt;</span> __value<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// çˆ¶ç»“ç‚¹ &lt; æœ€åä¸€ä¸ªç»“ç‚¹</span></span>
<span class="line">    <span class="token operator">*</span><span class="token punctuation">(</span>__first <span class="token operator">+</span> __holeIndex<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token operator">*</span><span class="token punctuation">(</span>__first <span class="token operator">+</span> __parent<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// çˆ¶ç»“ç‚¹ä¸‹ç§»</span></span>
<span class="line">    __holeIndex <span class="token operator">=</span> __parent<span class="token punctuation">;</span>                           <span class="token comment">// çˆ¶ç»“ç‚¹ç©ºç¼º</span></span>
<span class="line">    __parent <span class="token operator">=</span> <span class="token punctuation">(</span>__holeIndex <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>                 <span class="token comment">// æŒ‡å‘çˆ¶ç»“ç‚¹çš„çˆ¶ç»“ç‚¹</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token operator">*</span><span class="token punctuation">(</span>__first <span class="token operator">+</span> __holeIndex<span class="token punctuation">)</span> <span class="token operator">=</span> __value<span class="token punctuation">;</span> <span class="token comment">// æ–°å…ƒç´ æ”¾å…¥åˆé€‚çš„ç»“ç‚¹</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="pop-heap-ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#pop-heap-ç®—æ³•"><span><code>pop_heap</code> ç®—æ³•</span></a></h3><p>å–èµ°æ ¹ç»“ç‚¹ï¼Œå°†ç©ºå‡ºçš„æ ¹ç»“ç‚¹ä½ç½®ä¸‹æ”¾ (percolate down) ç›´åˆ°å¶å­ç»“ç‚¹ï¼›ç„¶åå°†å †çš„æœ€å³ä¸‹ç»“ç‚¹å¡«åˆ°ç©ºå‡ºçš„ä½ç½®ï¼Œåšä¸€æ¬¡ä¸Šæµ® (percolate up) æ“ä½œã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp" data-title="cpp"><pre><code><span class="line"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">_RandomAccessIterator</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">_Compare</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">inline</span> <span class="token keyword">void</span></span>
<span class="line"><span class="token function">pop_heap</span><span class="token punctuation">(</span>_RandomAccessIterator __first<span class="token punctuation">,</span></span>
<span class="line">         _RandomAccessIterator __last<span class="token punctuation">,</span> _Compare __comp<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">__STL_REQUIRES</span><span class="token punctuation">(</span>_RandomAccessIterator<span class="token punctuation">,</span> _Mutable_RandomAccessIterator<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token function">__pop_heap_aux</span><span class="token punctuation">(</span>__first<span class="token punctuation">,</span> __last<span class="token punctuation">,</span> <span class="token function">__VALUE_TYPE</span><span class="token punctuation">(</span>__first<span class="token punctuation">)</span><span class="token punctuation">,</span> __comp<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp" data-title="cpp"><pre><code><span class="line"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">_RandomAccessIterator</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">_Tp</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">inline</span> <span class="token keyword">void</span></span>
<span class="line"><span class="token function">__pop_heap_aux</span><span class="token punctuation">(</span>_RandomAccessIterator __first<span class="token punctuation">,</span> _RandomAccessIterator __last<span class="token punctuation">,</span></span>
<span class="line">               _Tp<span class="token operator">*</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">__pop_heap</span><span class="token punctuation">(</span>__first<span class="token punctuation">,</span> __last <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> __last <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">             <span class="token function">_Tp</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">(</span>__last <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">__DISTANCE_TYPE</span><span class="token punctuation">(</span>__first<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp" data-title="cpp"><pre><code><span class="line"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">_RandomAccessIterator</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">_Tp</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">_Distance</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">inline</span> <span class="token keyword">void</span></span>
<span class="line"><span class="token function">__pop_heap</span><span class="token punctuation">(</span>_RandomAccessIterator __first<span class="token punctuation">,</span> _RandomAccessIterator __last<span class="token punctuation">,</span></span>
<span class="line">           _RandomAccessIterator __result<span class="token punctuation">,</span> _Tp __value<span class="token punctuation">,</span> _Distance<span class="token operator">*</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token operator">*</span>__result <span class="token operator">=</span> <span class="token operator">*</span>__first<span class="token punctuation">;</span> <span class="token comment">// å°†å †é¡¶å…ƒç´  (æœ€å¤§å…ƒç´ ) ä¿å­˜åˆ°ç©ºé—´çš„æœ€å</span></span>
<span class="line">  <span class="token function">__adjust_heap</span><span class="token punctuation">(</span>__first<span class="token punctuation">,</span> <span class="token function">_Distance</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">_Distance</span><span class="token punctuation">(</span>__last <span class="token operator">-</span> __first<span class="token punctuation">)</span><span class="token punctuation">,</span> __value<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp" data-title="cpp"><pre><code><span class="line"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">_RandomAccessIterator</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">_Distance</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">_Tp</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">void</span></span>
<span class="line"><span class="token function">__adjust_heap</span><span class="token punctuation">(</span>_RandomAccessIterator __first<span class="token punctuation">,</span> _Distance __holeIndex<span class="token punctuation">,</span></span>
<span class="line">              _Distance __len<span class="token punctuation">,</span> _Tp __value<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  _Distance __topIndex <span class="token operator">=</span> __holeIndex<span class="token punctuation">;</span> <span class="token comment">// å †é¡¶ç›®å‰ç©ºç¼º</span></span>
<span class="line">  _Distance __secondChild <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> __holeIndex <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// å³å­©å­</span></span>
<span class="line">  <span class="token keyword">while</span> <span class="token punctuation">(</span>__secondChild <span class="token operator">&lt;</span> __len<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">(</span>__first <span class="token operator">+</span> __secondChild<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token operator">*</span><span class="token punctuation">(</span>__first <span class="token operator">+</span> <span class="token punctuation">(</span>__secondChild <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">      __secondChild<span class="token operator">--</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token operator">*</span><span class="token punctuation">(</span>__first <span class="token operator">+</span> __holeIndex<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token operator">*</span><span class="token punctuation">(</span>__first <span class="token operator">+</span> __secondChild<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å·¦å­©å­</span></span>
<span class="line">    __holeIndex <span class="token operator">=</span> __secondChild<span class="token punctuation">;</span></span>
<span class="line">    __secondChild <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span>__secondChild <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>__secondChild <span class="token operator">==</span> __len<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token operator">*</span><span class="token punctuation">(</span>__first <span class="token operator">+</span> __holeIndex<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token operator">*</span><span class="token punctuation">(</span>__first <span class="token operator">+</span> <span class="token punctuation">(</span>__secondChild <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    __holeIndex <span class="token operator">=</span> __secondChild <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token function">__push_heap</span><span class="token punctuation">(</span>__first<span class="token punctuation">,</span> __holeIndex<span class="token punctuation">,</span> __topIndex<span class="token punctuation">,</span> __value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å°†å †å†…æœ€åä¸€ä¸ªå…ƒç´ ç§»åˆ°ç©ºä½ï¼Œå¹¶ä¸Šæµ®</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€ç»ˆï¼Œå †å†…çš„æœ€å¤§å…ƒç´ è¢«æ”¾åˆ°äº†åº•å±‚å…ƒç´ çš„å°¾ç«¯ (æœªè¢«å–èµ°)ï¼ŒåŒæ—¶å †çš„åŒºé—´èŒƒå›´æ¯”åŸå…ˆå°‘ 1ã€‚</p><h3 id="sort-heap-ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#sort-heap-ç®—æ³•"><span><code>sort_heap</code> ç®—æ³•</span></a></h3><p>è¿­ä»£åœ°å¯¹æ•´ä¸ª heap è¿›è¡Œ <code>pop_heap()</code> æ“ä½œï¼Œé‚£ä¹ˆæ¯æ¬¡å †åŒºé—´çš„æœ€åå°±æ˜¯å †å†…æœ€å¤§å…ƒç´ ã€‚æ¯æ¬¡æ“ä½œèŒƒå›´ç¼©å° 1ï¼Œæœ€ç»ˆå¾—åˆ°çš„å°±æ˜¯ä¸€ä¸ªé€’å¢çš„åºåˆ—ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp" data-title="cpp"><pre><code><span class="line"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">_RandomAccessIterator</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">sort_heap</span><span class="token punctuation">(</span>_RandomAccessIterator __first<span class="token punctuation">,</span> _RandomAccessIterator __last<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">__STL_REQUIRES</span><span class="token punctuation">(</span>_RandomAccessIterator<span class="token punctuation">,</span> _Mutable_RandomAccessIterator<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token function">__STL_REQUIRES</span><span class="token punctuation">(</span><span class="token keyword">typename</span> <span class="token class-name">iterator_traits</span><span class="token operator">&lt;</span>_RandomAccessIterator<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>value_type<span class="token punctuation">,</span></span>
<span class="line">                 _LessThanComparable<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">while</span> <span class="token punctuation">(</span>__last <span class="token operator">-</span> __first <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token function">pop_heap</span><span class="token punctuation">(</span>__first<span class="token punctuation">,</span> __last<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">_RandomAccessIterator</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">_Compare</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">void</span></span>
<span class="line"><span class="token function">sort_heap</span><span class="token punctuation">(</span>_RandomAccessIterator __first<span class="token punctuation">,</span></span>
<span class="line">          _RandomAccessIterator __last<span class="token punctuation">,</span> _Compare __comp<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">__STL_REQUIRES</span><span class="token punctuation">(</span>_RandomAccessIterator<span class="token punctuation">,</span> _Mutable_RandomAccessIterator<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">while</span> <span class="token punctuation">(</span>__last <span class="token operator">-</span> __first <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token function">pop_heap</span><span class="token punctuation">(</span>__first<span class="token punctuation">,</span> __last<span class="token operator">--</span><span class="token punctuation">,</span> __comp<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="make-heap-ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#make-heap-ç®—æ³•"><span><code>make_heap</code> ç®—æ³•</span></a></h3><p>è¯¥ç®—æ³•å°†ä¸€æ®µç°æœ‰æ•°æ® <strong>å †åŒ–</strong>ã€‚æ‰¾åˆ°åŒºé—´å†…æœ€åä¸€ä¸ªå…ƒç´ çš„çˆ¶ç»“ç‚¹ã€‚ä»¥è¯¥ç»“ç‚¹ä¸ºå †çš„æ ¹ï¼Œè¿›è¡Œå †è°ƒæ•´ã€‚ç„¶åä¸æ–­è°ƒæ•´æ¯ä¸€ä¸ªçˆ¶ç»“ç‚¹ï¼Œç›´åˆ°çˆ¶ç»“ç‚¹æˆä¸ºæ•´ä¸ªå †çš„æ ¹ã€‚</p><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp" data-title="cpp"><pre><code><span class="line"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">_RandomAccessIterator</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">_Compare</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token keyword">class</span> <span class="token class-name">_Tp</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">_Distance</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">void</span></span>
<span class="line"><span class="token function">__make_heap</span><span class="token punctuation">(</span>_RandomAccessIterator __first<span class="token punctuation">,</span> _RandomAccessIterator __last<span class="token punctuation">,</span></span>
<span class="line">            _Compare __comp<span class="token punctuation">,</span> _Tp<span class="token operator">*</span><span class="token punctuation">,</span> _Distance<span class="token operator">*</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>__last <span class="token operator">-</span> __first <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span></span>
<span class="line">  _Distance __len <span class="token operator">=</span> __last <span class="token operator">-</span> __first<span class="token punctuation">;</span></span>
<span class="line">  _Distance __parent <span class="token operator">=</span> <span class="token punctuation">(</span>__len <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">__adjust_heap</span><span class="token punctuation">(</span>__first<span class="token punctuation">,</span> __parent<span class="token punctuation">,</span> __len<span class="token punctuation">,</span> <span class="token function">_Tp</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">(</span>__first <span class="token operator">+</span> __parent<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">                  __comp<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>__parent <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span></span>
<span class="line">    __parent<span class="token operator">--</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">_RandomAccessIterator</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">_Compare</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">inline</span> <span class="token keyword">void</span></span>
<span class="line"><span class="token function">make_heap</span><span class="token punctuation">(</span>_RandomAccessIterator __first<span class="token punctuation">,</span></span>
<span class="line">          _RandomAccessIterator __last<span class="token punctuation">,</span> _Compare __comp<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">__STL_REQUIRES</span><span class="token punctuation">(</span>_RandomAccessIterator<span class="token punctuation">,</span> _Mutable_RandomAccessIterator<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token function">__make_heap</span><span class="token punctuation">(</span>__first<span class="token punctuation">,</span> __last<span class="token punctuation">,</span> __comp<span class="token punctuation">,</span></span>
<span class="line">              <span class="token function">__VALUE_TYPE</span><span class="token punctuation">(</span>__first<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">__DISTANCE_TYPE</span><span class="token punctuation">(</span>__first<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-7-3-heap-æ²¡æœ‰è¿­ä»£å™¨" tabindex="-1"><a class="header-anchor" href="#_4-7-3-heap-æ²¡æœ‰è¿­ä»£å™¨"><span>4.7.3 heap æ²¡æœ‰è¿­ä»£å™¨</span></a></h2><p>heap ä¸æä¾›éå†åŠŸèƒ½ï¼Œä¹Ÿä¸æä¾›è¿­ä»£å™¨ã€‚</p>`,32)]))}const i=n(t,[["render",c],["__file","Chapter 4.7 - heap.html.vue"]]),u=JSON.parse('{"path":"/the-annotated-stl-sources-notes/Chapter%204%20-%20%E5%BA%8F%E5%88%97%E5%BC%8F%E5%AE%B9%E5%99%A8/Chapter%204.7%20-%20heap.html","title":"Chapter 4.7 - heap","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"4.7.1 heap æ¦‚è¿°","slug":"_4-7-1-heap-æ¦‚è¿°","link":"#_4-7-1-heap-æ¦‚è¿°","children":[]},{"level":2,"title":"4.7.2 heap ç®—æ³•","slug":"_4-7-2-heap-ç®—æ³•","link":"#_4-7-2-heap-ç®—æ³•","children":[{"level":3,"title":"push_heap ç®—æ³•","slug":"push-heap-ç®—æ³•","link":"#push-heap-ç®—æ³•","children":[]},{"level":3,"title":"pop_heap ç®—æ³•","slug":"pop-heap-ç®—æ³•","link":"#pop-heap-ç®—æ³•","children":[]},{"level":3,"title":"sort_heap ç®—æ³•","slug":"sort-heap-ç®—æ³•","link":"#sort-heap-ç®—æ³•","children":[]},{"level":3,"title":"make_heap ç®—æ³•","slug":"make-heap-ç®—æ³•","link":"#make-heap-ç®—æ³•","children":[]}]},{"level":2,"title":"4.7.3 heap æ²¡æœ‰è¿­ä»£å™¨","slug":"_4-7-3-heap-æ²¡æœ‰è¿­ä»£å™¨","link":"#_4-7-3-heap-æ²¡æœ‰è¿­ä»£å™¨","children":[]}],"git":{},"filePathRelative":"the-annotated-stl-sources-notes/Chapter 4 - åºåˆ—å¼å®¹å™¨/Chapter 4.7 - heap.md"}');export{i as comp,u as data};
