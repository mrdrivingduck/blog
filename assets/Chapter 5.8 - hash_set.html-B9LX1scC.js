import{_ as s,c as a,a as p,o as t}from"./app-BeHGwf2X.js";const e={};function o(c,n){return t(),a("div",null,n[0]||(n[0]=[p(`<h1 id="chapter-5-8-hash-set" tabindex="-1"><a class="header-anchor" href="#chapter-5-8-hash-set"><span>Chapter 5.8 - hash_set</span></a></h1><p>Created by : Mr Dk.</p><p>2021 / 04 / 06 23:31</p><p>Nanjing, Jiangsu, China</p><hr><p>SGI STL 的 hash_set 使用 hashtable 作为底层机制。几乎所有 hash_set 的操作都是转而调用 hashtable 的操作。hash_set 和 set 的区别是 <strong>无序性</strong>。</p><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp" data-title="cpp"><pre><code><span class="line"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">_Value</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token keyword">class</span> <span class="token class-name">_HashFcn</span>  <span class="token function">__STL_DEPENDENT_DEFAULT_TMPL</span><span class="token punctuation">(</span>hash<span class="token operator">&lt;</span>_Value<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token keyword">class</span> <span class="token class-name">_EqualKey</span> <span class="token function">__STL_DEPENDENT_DEFAULT_TMPL</span><span class="token punctuation">(</span>equal_to<span class="token operator">&lt;</span>_Value<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token keyword">class</span> <span class="token class-name">_Alloc</span> <span class="token operator">=</span>  <span class="token function">__STL_DEFAULT_ALLOCATOR</span><span class="token punctuation">(</span>_Value<span class="token punctuation">)</span> <span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">hash_set</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>底层结构为 hashtable：</p><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp" data-title="cpp"><pre><code><span class="line"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">_Value</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">_HashFcn</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">_EqualKey</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">_Alloc</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">hash_set</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// requirements:</span></span>
<span class="line"></span>
<span class="line">  <span class="token function">__STL_CLASS_REQUIRES</span><span class="token punctuation">(</span>_Value<span class="token punctuation">,</span> _Assignable<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token function">__STL_CLASS_UNARY_FUNCTION_CHECK</span><span class="token punctuation">(</span>_HashFcn<span class="token punctuation">,</span> size_t<span class="token punctuation">,</span> _Value<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token function">__STL_CLASS_BINARY_FUNCTION_CHECK</span><span class="token punctuation">(</span>_EqualKey<span class="token punctuation">,</span> <span class="token keyword">bool</span><span class="token punctuation">,</span> _Value<span class="token punctuation">,</span> _Value<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">private</span><span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">typedef</span> hashtable<span class="token operator">&lt;</span>_Value<span class="token punctuation">,</span> _Value<span class="token punctuation">,</span> _HashFcn<span class="token punctuation">,</span> _Identity<span class="token operator">&lt;</span>_Value<span class="token operator">&gt;</span><span class="token punctuation">,</span></span>
<span class="line">                    _EqualKey<span class="token punctuation">,</span> _Alloc<span class="token operator">&gt;</span> _Ht<span class="token punctuation">;</span></span>
<span class="line">  _Ht _M_ht<span class="token punctuation">;</span> <span class="token comment">// hashtable</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">public</span><span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">typedef</span> <span class="token keyword">typename</span> <span class="token class-name">_Ht</span><span class="token double-colon punctuation">::</span>key_type key_type<span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">typedef</span> <span class="token keyword">typename</span> <span class="token class-name">_Ht</span><span class="token double-colon punctuation">::</span>value_type value_type<span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">typedef</span> <span class="token keyword">typename</span> <span class="token class-name">_Ht</span><span class="token double-colon punctuation">::</span>hasher hasher<span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">typedef</span> <span class="token keyword">typename</span> <span class="token class-name">_Ht</span><span class="token double-colon punctuation">::</span>key_equal key_equal<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">typedef</span> <span class="token keyword">typename</span> <span class="token class-name">_Ht</span><span class="token double-colon punctuation">::</span>size_type size_type<span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">typedef</span> <span class="token keyword">typename</span> <span class="token class-name">_Ht</span><span class="token double-colon punctuation">::</span>difference_type difference_type<span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">typedef</span> <span class="token keyword">typename</span> <span class="token class-name">_Ht</span><span class="token double-colon punctuation">::</span>const_pointer pointer<span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">typedef</span> <span class="token keyword">typename</span> <span class="token class-name">_Ht</span><span class="token double-colon punctuation">::</span>const_pointer const_pointer<span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">typedef</span> <span class="token keyword">typename</span> <span class="token class-name">_Ht</span><span class="token double-colon punctuation">::</span>const_reference reference<span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">typedef</span> <span class="token keyword">typename</span> <span class="token class-name">_Ht</span><span class="token double-colon punctuation">::</span>const_reference const_reference<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">typedef</span> <span class="token keyword">typename</span> <span class="token class-name">_Ht</span><span class="token double-colon punctuation">::</span>const_iterator iterator<span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">typedef</span> <span class="token keyword">typename</span> <span class="token class-name">_Ht</span><span class="token double-colon punctuation">::</span>const_iterator const_iterator<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">typedef</span> <span class="token keyword">typename</span> <span class="token class-name">_Ht</span><span class="token double-colon punctuation">::</span>allocator_type allocator_type<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  hasher <span class="token function">hash_funct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _M_ht<span class="token punctuation">.</span><span class="token function">hash_funct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line">  key_equal <span class="token function">key_eq</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _M_ht<span class="token punctuation">.</span><span class="token function">key_eq</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line">  allocator_type <span class="token function">get_allocator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _M_ht<span class="token punctuation">.</span><span class="token function">get_allocator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">public</span><span class="token operator">:</span></span>
<span class="line">  <span class="token comment">// 构造函数</span></span>
<span class="line">  <span class="token function">hash_set</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">:</span> <span class="token function">_M_ht</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token function">hasher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">key_equal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">allocator_type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">explicit</span> <span class="token function">hash_set</span><span class="token punctuation">(</span>size_type __n<span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">:</span> <span class="token function">_M_ht</span><span class="token punctuation">(</span>__n<span class="token punctuation">,</span> <span class="token function">hasher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">key_equal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">allocator_type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">  <span class="token function">hash_set</span><span class="token punctuation">(</span>size_type __n<span class="token punctuation">,</span> <span class="token keyword">const</span> hasher<span class="token operator">&amp;</span> __hf<span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">:</span> <span class="token function">_M_ht</span><span class="token punctuation">(</span>__n<span class="token punctuation">,</span> __hf<span class="token punctuation">,</span> <span class="token function">key_equal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">allocator_type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">  <span class="token function">hash_set</span><span class="token punctuation">(</span>size_type __n<span class="token punctuation">,</span> <span class="token keyword">const</span> hasher<span class="token operator">&amp;</span> __hf<span class="token punctuation">,</span> <span class="token keyword">const</span> key_equal<span class="token operator">&amp;</span> __eql<span class="token punctuation">,</span></span>
<span class="line">           <span class="token keyword">const</span> allocator_type<span class="token operator">&amp;</span> __a <span class="token operator">=</span> <span class="token function">allocator_type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">:</span> <span class="token function">_M_ht</span><span class="token punctuation">(</span>__n<span class="token punctuation">,</span> __hf<span class="token punctuation">,</span> __eql<span class="token punctuation">,</span> __a<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token function">hash_set</span><span class="token punctuation">(</span><span class="token keyword">const</span> value_type<span class="token operator">*</span> __f<span class="token punctuation">,</span> <span class="token keyword">const</span> value_type<span class="token operator">*</span> __l<span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">:</span> <span class="token function">_M_ht</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token function">hasher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">key_equal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">allocator_type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span> _M_ht<span class="token punctuation">.</span><span class="token function">insert_unique</span><span class="token punctuation">(</span>__f<span class="token punctuation">,</span> __l<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line">  <span class="token function">hash_set</span><span class="token punctuation">(</span><span class="token keyword">const</span> value_type<span class="token operator">*</span> __f<span class="token punctuation">,</span> <span class="token keyword">const</span> value_type<span class="token operator">*</span> __l<span class="token punctuation">,</span> size_type __n<span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">:</span> <span class="token function">_M_ht</span><span class="token punctuation">(</span>__n<span class="token punctuation">,</span> <span class="token function">hasher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">key_equal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">allocator_type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span> _M_ht<span class="token punctuation">.</span><span class="token function">insert_unique</span><span class="token punctuation">(</span>__f<span class="token punctuation">,</span> __l<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line">  <span class="token function">hash_set</span><span class="token punctuation">(</span><span class="token keyword">const</span> value_type<span class="token operator">*</span> __f<span class="token punctuation">,</span> <span class="token keyword">const</span> value_type<span class="token operator">*</span> __l<span class="token punctuation">,</span> size_type __n<span class="token punctuation">,</span></span>
<span class="line">           <span class="token keyword">const</span> hasher<span class="token operator">&amp;</span> __hf<span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">:</span> <span class="token function">_M_ht</span><span class="token punctuation">(</span>__n<span class="token punctuation">,</span> __hf<span class="token punctuation">,</span> <span class="token function">key_equal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">allocator_type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span> _M_ht<span class="token punctuation">.</span><span class="token function">insert_unique</span><span class="token punctuation">(</span>__f<span class="token punctuation">,</span> __l<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line">  <span class="token function">hash_set</span><span class="token punctuation">(</span><span class="token keyword">const</span> value_type<span class="token operator">*</span> __f<span class="token punctuation">,</span> <span class="token keyword">const</span> value_type<span class="token operator">*</span> __l<span class="token punctuation">,</span> size_type __n<span class="token punctuation">,</span></span>
<span class="line">           <span class="token keyword">const</span> hasher<span class="token operator">&amp;</span> __hf<span class="token punctuation">,</span> <span class="token keyword">const</span> key_equal<span class="token operator">&amp;</span> __eql<span class="token punctuation">,</span></span>
<span class="line">           <span class="token keyword">const</span> allocator_type<span class="token operator">&amp;</span> __a <span class="token operator">=</span> <span class="token function">allocator_type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">:</span> <span class="token function">_M_ht</span><span class="token punctuation">(</span>__n<span class="token punctuation">,</span> __hf<span class="token punctuation">,</span> __eql<span class="token punctuation">,</span> __a<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span> _M_ht<span class="token punctuation">.</span><span class="token function">insert_unique</span><span class="token punctuation">(</span>__f<span class="token punctuation">,</span> __l<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token function">hash_set</span><span class="token punctuation">(</span>const_iterator __f<span class="token punctuation">,</span> const_iterator __l<span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">:</span> <span class="token function">_M_ht</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token function">hasher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">key_equal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">allocator_type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span> _M_ht<span class="token punctuation">.</span><span class="token function">insert_unique</span><span class="token punctuation">(</span>__f<span class="token punctuation">,</span> __l<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line">  <span class="token function">hash_set</span><span class="token punctuation">(</span>const_iterator __f<span class="token punctuation">,</span> const_iterator __l<span class="token punctuation">,</span> size_type __n<span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">:</span> <span class="token function">_M_ht</span><span class="token punctuation">(</span>__n<span class="token punctuation">,</span> <span class="token function">hasher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">key_equal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">allocator_type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span> _M_ht<span class="token punctuation">.</span><span class="token function">insert_unique</span><span class="token punctuation">(</span>__f<span class="token punctuation">,</span> __l<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line">  <span class="token function">hash_set</span><span class="token punctuation">(</span>const_iterator __f<span class="token punctuation">,</span> const_iterator __l<span class="token punctuation">,</span> size_type __n<span class="token punctuation">,</span></span>
<span class="line">           <span class="token keyword">const</span> hasher<span class="token operator">&amp;</span> __hf<span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">:</span> <span class="token function">_M_ht</span><span class="token punctuation">(</span>__n<span class="token punctuation">,</span> __hf<span class="token punctuation">,</span> <span class="token function">key_equal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">allocator_type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span> _M_ht<span class="token punctuation">.</span><span class="token function">insert_unique</span><span class="token punctuation">(</span>__f<span class="token punctuation">,</span> __l<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line">  <span class="token function">hash_set</span><span class="token punctuation">(</span>const_iterator __f<span class="token punctuation">,</span> const_iterator __l<span class="token punctuation">,</span> size_type __n<span class="token punctuation">,</span></span>
<span class="line">           <span class="token keyword">const</span> hasher<span class="token operator">&amp;</span> __hf<span class="token punctuation">,</span> <span class="token keyword">const</span> key_equal<span class="token operator">&amp;</span> __eql<span class="token punctuation">,</span></span>
<span class="line">           <span class="token keyword">const</span> allocator_type<span class="token operator">&amp;</span> __a <span class="token operator">=</span> <span class="token function">allocator_type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">:</span> <span class="token function">_M_ht</span><span class="token punctuation">(</span>__n<span class="token punctuation">,</span> __hf<span class="token punctuation">,</span> __eql<span class="token punctuation">,</span> __a<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span> _M_ht<span class="token punctuation">.</span><span class="token function">insert_unique</span><span class="token punctuation">(</span>__f<span class="token punctuation">,</span> __l<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span> <span class="token comment">/*__STL_MEMBER_TEMPLATES */</span></span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">public</span><span class="token operator">:</span></span>
<span class="line">  <span class="token comment">// 容量相关</span></span>
<span class="line">  size_type <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _M_ht<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line">  size_type <span class="token function">max_size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _M_ht<span class="token punctuation">.</span><span class="token function">max_size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">bool</span> <span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _M_ht<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span>hash_set<span class="token operator">&amp;</span> __hs<span class="token punctuation">)</span> <span class="token punctuation">{</span> _M_ht<span class="token punctuation">.</span><span class="token function">swap</span><span class="token punctuation">(</span>__hs<span class="token punctuation">.</span>_M_ht<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// 迭代器</span></span>
<span class="line">  iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _M_ht<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line">  iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _M_ht<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">public</span><span class="token operator">:</span></span>
<span class="line">  <span class="token comment">// 插入操作</span></span>
<span class="line">  pair<span class="token operator">&lt;</span>iterator<span class="token punctuation">,</span> <span class="token keyword">bool</span><span class="token operator">&gt;</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token keyword">const</span> value_type<span class="token operator">&amp;</span> __obj<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      pair<span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">_Ht</span><span class="token double-colon punctuation">::</span>iterator<span class="token punctuation">,</span> <span class="token keyword">bool</span><span class="token operator">&gt;</span> __p <span class="token operator">=</span> _M_ht<span class="token punctuation">.</span><span class="token function">insert_unique</span><span class="token punctuation">(</span>__obj<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token generic-function"><span class="token function">pair</span><span class="token generic class-name"><span class="token operator">&lt;</span>iterator<span class="token punctuation">,</span><span class="token keyword">bool</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>__p<span class="token punctuation">.</span>first<span class="token punctuation">,</span> __p<span class="token punctuation">.</span>second<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token keyword">const</span> value_type<span class="token operator">*</span> __f<span class="token punctuation">,</span> <span class="token keyword">const</span> value_type<span class="token operator">*</span> __l<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    _M_ht<span class="token punctuation">.</span><span class="token function">insert_unique</span><span class="token punctuation">(</span>__f<span class="token punctuation">,</span>__l<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span>const_iterator __f<span class="token punctuation">,</span> const_iterator __l<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span>_M_ht<span class="token punctuation">.</span><span class="token function">insert_unique</span><span class="token punctuation">(</span>__f<span class="token punctuation">,</span> __l<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line">  pair<span class="token operator">&lt;</span>iterator<span class="token punctuation">,</span> <span class="token keyword">bool</span><span class="token operator">&gt;</span> <span class="token function">insert_noresize</span><span class="token punctuation">(</span><span class="token keyword">const</span> value_type<span class="token operator">&amp;</span> __obj<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">{</span></span>
<span class="line">    pair<span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">_Ht</span><span class="token double-colon punctuation">::</span>iterator<span class="token punctuation">,</span> <span class="token keyword">bool</span><span class="token operator">&gt;</span> __p <span class="token operator">=</span></span>
<span class="line">      _M_ht<span class="token punctuation">.</span><span class="token function">insert_unique_noresize</span><span class="token punctuation">(</span>__obj<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token generic-function"><span class="token function">pair</span><span class="token generic class-name"><span class="token operator">&lt;</span>iterator<span class="token punctuation">,</span> <span class="token keyword">bool</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>__p<span class="token punctuation">.</span>first<span class="token punctuation">,</span> __p<span class="token punctuation">.</span>second<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// 查找操作</span></span>
<span class="line">  iterator <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">const</span> key_type<span class="token operator">&amp;</span> __key<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _M_ht<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>__key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// 查找某个 key 出现的次数</span></span>
<span class="line">  size_type <span class="token function">count</span><span class="token punctuation">(</span><span class="token keyword">const</span> key_type<span class="token operator">&amp;</span> __key<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _M_ht<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span>__key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// 查找某个 key 的迭代器范围</span></span>
<span class="line">  pair<span class="token operator">&lt;</span>iterator<span class="token punctuation">,</span> iterator<span class="token operator">&gt;</span> <span class="token function">equal_range</span><span class="token punctuation">(</span><span class="token keyword">const</span> key_type<span class="token operator">&amp;</span> __key<span class="token punctuation">)</span> <span class="token keyword">const</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token keyword">return</span> _M_ht<span class="token punctuation">.</span><span class="token function">equal_range</span><span class="token punctuation">(</span>__key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// 删除操作</span></span>
<span class="line">  size_type <span class="token function">erase</span><span class="token punctuation">(</span><span class="token keyword">const</span> key_type<span class="token operator">&amp;</span> __key<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> _M_ht<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span>__key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">void</span> <span class="token function">erase</span><span class="token punctuation">(</span>iterator __it<span class="token punctuation">)</span> <span class="token punctuation">{</span> _M_ht<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span>__it<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">void</span> <span class="token function">erase</span><span class="token punctuation">(</span>iterator __f<span class="token punctuation">,</span> iterator __l<span class="token punctuation">)</span> <span class="token punctuation">{</span> _M_ht<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span>__f<span class="token punctuation">,</span> __l<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> _M_ht<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">public</span><span class="token operator">:</span></span>
<span class="line">  <span class="token comment">// 桶容量相关</span></span>
<span class="line">  <span class="token keyword">void</span> <span class="token function">resize</span><span class="token punctuation">(</span>size_type __hint<span class="token punctuation">)</span> <span class="token punctuation">{</span> _M_ht<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span>__hint<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line">  size_type <span class="token function">bucket_count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _M_ht<span class="token punctuation">.</span><span class="token function">bucket_count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line">  size_type <span class="token function">max_bucket_count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _M_ht<span class="token punctuation">.</span><span class="token function">max_bucket_count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line">  size_type <span class="token function">elems_in_bucket</span><span class="token punctuation">(</span>size_type __n<span class="token punctuation">)</span> <span class="token keyword">const</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token keyword">return</span> _M_ht<span class="token punctuation">.</span><span class="token function">elems_in_bucket</span><span class="token punctuation">(</span>__n<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">_Value</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">_HashFcn</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">_EqualKey</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">_Alloc</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">inline</span> <span class="token keyword">bool</span></span>
<span class="line"><span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> hash_set<span class="token operator">&lt;</span>_Value<span class="token punctuation">,</span>_HashFcn<span class="token punctuation">,</span>_EqualKey<span class="token punctuation">,</span>_Alloc<span class="token operator">&gt;</span><span class="token operator">&amp;</span> __hs1<span class="token punctuation">,</span></span>
<span class="line">           <span class="token keyword">const</span> hash_set<span class="token operator">&lt;</span>_Value<span class="token punctuation">,</span>_HashFcn<span class="token punctuation">,</span>_EqualKey<span class="token punctuation">,</span>_Alloc<span class="token operator">&gt;</span><span class="token operator">&amp;</span> __hs2<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> __hs1<span class="token punctuation">.</span>_M_ht <span class="token operator">==</span> __hs2<span class="token punctuation">.</span>_M_ht<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,9)]))}const u=s(e,[["render",o],["__file","Chapter 5.8 - hash_set.html.vue"]]),i=JSON.parse('{"path":"/the-annotated-stl-sources-notes/Chapter%205%20-%20%E5%85%B3%E8%81%94%E5%BC%8F%E5%AE%B9%E5%99%A8/Chapter%205.8%20-%20hash_set.html","title":"Chapter 5.8 - hash_set","lang":"en-US","frontmatter":{},"headers":[],"git":{},"filePathRelative":"the-annotated-stl-sources-notes/Chapter 5 - 关联式容器/Chapter 5.8 - hash_set.md"}');export{u as comp,i as data};
