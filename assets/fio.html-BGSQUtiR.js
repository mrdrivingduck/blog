import{_ as a,c as n,a as e,o as p}from"./app-7eKjwDat.js";const t={};function l(o,s){return p(),n("div",null,s[0]||(s[0]=[e(`<h1 id="fio" tabindex="-1"><a class="header-anchor" href="#fio"><span>fio</span></a></h1><p>Created by : Mr Dk.</p><p>2023 / 02 / 25 22:55</p><p>Hangzhou, Zhejiang, China</p><hr><h2 id="background" tabindex="-1"><a class="header-anchor" href="#background"><span>Background</span></a></h2><p><code>fio</code> 是它的作者因厌烦了为测试不同的 I/O 负载的性能数据而需要写不同的测试而开发的。它无需写任何 test case 就可以模拟出不同的 I/O 负载。它的作者希望 <code>fio</code> 足够灵活，以便能够面对各种各样的 I/O 场景。从大体上，<code>fio</code> 会使用一些线程 / 进程来模拟用户指定的 I/O pattern。</p><h2 id="usage" tabindex="-1"><a class="header-anchor" href="#usage"><span>Usage</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">$ fio <span class="token parameter variable">-h</span></span>
<span class="line">fio-3.28</span>
<span class="line">fio <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span>job options<span class="token punctuation">]</span> <span class="token operator">&lt;</span>job file<span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token operator">&gt;</span></span>
<span class="line">  <span class="token parameter variable">--debug</span><span class="token operator">=</span>options       Enable debug logging. May be one/more of:</span>
<span class="line">                        process,file,io,mem,blktrace,verify,random,parse,</span>
<span class="line">                        diskutil,job,mutex,profile,time,net,rate,compress,</span>
<span class="line">                        steadystate,helperthread,zbd</span>
<span class="line">  --parse-only          Parse options only, don<span class="token string">&#39;t start any IO</span>
<span class="line">  --merge-blktrace-only Merge blktraces only, don&#39;</span>t start any IO</span>
<span class="line">  <span class="token parameter variable">--output</span>              Write output to <span class="token function">file</span></span>
<span class="line">  --bandwidth-log       Generate aggregate bandwidth logs</span>
<span class="line">  <span class="token parameter variable">--minimal</span>             Minimal <span class="token punctuation">(</span>terse<span class="token punctuation">)</span> output</span>
<span class="line">  --output-format<span class="token operator">=</span>type  Output <span class="token function">format</span> <span class="token punctuation">(</span>terse,json,json+,normal<span class="token punctuation">)</span></span>
<span class="line">  --terse-version<span class="token operator">=</span>type  Set terse version output <span class="token function">format</span> <span class="token punctuation">(</span>default <span class="token number">3</span>, or <span class="token number">2</span> or <span class="token number">4</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token parameter variable">--version</span>             Print version info and <span class="token builtin class-name">exit</span></span>
<span class="line">  <span class="token parameter variable">--help</span>                Print this page</span>
<span class="line">  --cpuclock-test       Perform test/validation of CPU clock</span>
<span class="line">  <span class="token parameter variable">--crctest</span><span class="token operator">=</span><span class="token punctuation">[</span>type<span class="token punctuation">]</span>      Test speed of checksum functions</span>
<span class="line">  <span class="token parameter variable">--cmdhelp</span><span class="token operator">=</span>cmd         Print <span class="token builtin class-name">command</span> help, <span class="token string">&quot;all&quot;</span> <span class="token keyword">for</span> all of them</span>
<span class="line">  <span class="token parameter variable">--enghelp</span><span class="token operator">=</span>engine      Print ioengine help, or list available ioengines</span>
<span class="line">  <span class="token parameter variable">--enghelp</span><span class="token operator">=</span>engine,cmd  Print <span class="token builtin class-name">help</span> <span class="token keyword">for</span> an ioengine cmd</span>
<span class="line">  <span class="token parameter variable">--showcmd</span>             Turn a job <span class="token function">file</span> into <span class="token builtin class-name">command</span> line options</span>
<span class="line">  <span class="token parameter variable">--eta</span><span class="token operator">=</span>when            When ETA estimate should be printed</span>
<span class="line">                        May be <span class="token string">&quot;always&quot;</span>, <span class="token string">&quot;never&quot;</span> or <span class="token string">&quot;auto&quot;</span></span>
<span class="line">  --eta-newline<span class="token operator">=</span>t       Force a new line <span class="token keyword">for</span> every <span class="token string">&#39;t&#39;</span> period passed</span>
<span class="line">  --status-interval<span class="token operator">=</span>t   Force full status dump every <span class="token string">&#39;t&#39;</span> period passed</span>
<span class="line">  <span class="token parameter variable">--readonly</span>            Turn on safety read-only checks, preventing writes</span>
<span class="line">  <span class="token parameter variable">--section</span><span class="token operator">=</span>name        Only run specified section <span class="token keyword">in</span> job file, multiple sections can be specified</span>
<span class="line">  --alloc-size<span class="token operator">=</span>kb       Set smalloc pool to this size <span class="token keyword">in</span> kb <span class="token punctuation">(</span>def <span class="token number">16384</span><span class="token punctuation">)</span></span>
<span class="line">  --warnings-fatal      Fio parser warnings are fatal</span>
<span class="line">  --max-jobs<span class="token operator">=</span>nr         Maximum number of threads/processes to support</span>
<span class="line">  <span class="token parameter variable">--server</span><span class="token operator">=</span>args         Start a backend fio server</span>
<span class="line">  <span class="token parameter variable">--daemonize</span><span class="token operator">=</span>pidfile   Background fio server, <span class="token function">write</span> pid to <span class="token function">file</span></span>
<span class="line">  <span class="token parameter variable">--client</span><span class="token operator">=</span>hostname     Talk to remote backend<span class="token punctuation">(</span>s<span class="token punctuation">)</span> fio server at <span class="token function">hostname</span></span>
<span class="line">  --remote-config<span class="token operator">=</span>file  Tell fio server to load this <span class="token builtin class-name">local</span> job <span class="token function">file</span></span>
<span class="line">  --idle-prof<span class="token operator">=</span>option    Report cpu idleness on a system or percpu basis</span>
<span class="line">                        <span class="token punctuation">(</span>option<span class="token operator">=</span>system,percpu<span class="token punctuation">)</span> or run unit work</span>
<span class="line">                        calibration only <span class="token punctuation">(</span>option<span class="token operator">=</span>calibrate<span class="token punctuation">)</span></span>
<span class="line">  --inflate-log<span class="token operator">=</span>log     Inflate and output compressed log</span>
<span class="line">  --trigger-file<span class="token operator">=</span>file   Execute trigger cmd when <span class="token function">file</span> exists</span>
<span class="line">  --trigger-timeout<span class="token operator">=</span>t   Execute trigger at this <span class="token function">time</span></span>
<span class="line">  <span class="token parameter variable">--trigger</span><span class="token operator">=</span>cmd         Set this <span class="token builtin class-name">command</span> as <span class="token builtin class-name">local</span> trigger</span>
<span class="line">  --trigger-remote<span class="token operator">=</span>cmd  Set this <span class="token builtin class-name">command</span> as remote trigger</span>
<span class="line">  --aux-path<span class="token operator">=</span>path       Use this path <span class="token keyword">for</span> fio state generated files</span>
<span class="line"></span>
<span class="line">Fio was written by Jens Axboe <span class="token operator">&lt;</span>axboe@kernel.dk<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="device-file" tabindex="-1"><a class="header-anchor" href="#device-file"><span>Device / File</span></a></h3><p>I/O 测试的对象可以是块设备或者是文件。如果是文件，还支持对一系列文件进行测试。使用 <code>--filename</code> 参数来指定。</p><h3 id="read-write-pattern" tabindex="-1"><a class="header-anchor" href="#read-write-pattern"><span>Read / Write Pattern</span></a></h3><p>使用 <code>--rw</code> 参数指定不同的 I/O pattern：</p><ul><li><code>read</code>：顺序读</li><li><code>write</code>：顺序写</li><li><code>randread</code>：随机读</li><li><code>randwrite</code>：随机写</li><li><code>rw</code>：混合顺序读写</li><li><code>randrw</code>：混合随机读写</li></ul><p>默认的混合百分比是 1:1。读写混合比例可调整。</p><h3 id="block-size" tabindex="-1"><a class="header-anchor" href="#block-size"><span>Block Size</span></a></h3><p>使用 <code>--blocksize</code> 来指定 I/O 的单位，默认为 4kB。</p><p>使用 <code>--nrfiles</code> 来指定每个并发单位使用的文件数量，默认为 1。</p><p>使用 <code>--openfiles</code> 来指定同时打开的文件数量，默认与 <code>--nrfiles</code> 保持一致。</p><p>使用 <code>--lockmem</code> 来限定使用的内存量。</p><h3 id="parallelism" tabindex="-1"><a class="header-anchor" href="#parallelism"><span>Parallelism</span></a></h3><p>使用 <code>--numjobs</code> 指定有多少个相同的进程 / 线程同时工作，默认为 1。</p><p>使用 <code>--thread</code> 来指定使用 <code>pthread_create</code> 创建出的线程，而不是 <code>fork</code> 产生的进程。</p><p>使用 <code>--group_reporting</code> 来指定输出整个并行组的汇总统计数据，而不是单个进程 / 线程的。</p><h3 id="i-o-engine" tabindex="-1"><a class="header-anchor" href="#i-o-engine"><span>I/O Engine</span></a></h3><p>使用 <code>--ioengine</code> 参数指定每个工作进程 / 线程如何发出 I/O：</p><ul><li><code>sync</code>：使用 <code>read</code> / <code>write</code> 来进行 I/O，<code>fseek</code> 被用于修改 I/O 位置</li><li><code>psync</code>：使用 <code>pread</code> / <code>pwrite</code></li><li><code>vsync</code>：使用 <code>readv</code> / <code>writev</code></li><li><code>libaio</code></li><li><code>posixaio</code></li><li>...</li></ul><h3 id="direct-buffer" tabindex="-1"><a class="header-anchor" href="#direct-buffer"><span>Direct / Buffer</span></a></h3><p>使用 <code>--direct</code> 使用 direct I/O；使用 <code>--buffered</code> 使用 buffered I/O。默认使用 buffered I/O。</p><h3 id="initialization" tabindex="-1"><a class="header-anchor" href="#initialization"><span>Initialization</span></a></h3><p>默认情况下，只会在初始化阶段用随机数据填充 buffer。使用 <code>--zero_buffers</code> 可以把 buffer 初始化为全 0；使用 <code>--refill_buffers</code> 将会在每次进行 I/O 前重新填充 buffer。</p><h3 id="stop-condition" tabindex="-1"><a class="header-anchor" href="#stop-condition"><span>Stop Condition</span></a></h3><p>使用 <code>--size</code> 来指定需要进行的 I/O 总量。当 I/O 传输达到这个总量的字节数时停止。</p><p>使用 <code>--runtime</code> 来指定运行时间。</p><h2 id="results" tabindex="-1"><a class="header-anchor" href="#results"><span>Results</span></a></h2><p>模拟一个数据库的 I/O pattern：</p><ul><li>I/O pattern 为随机读写（比如说 OLTP 点查）</li><li>读写比例为 3:1（瞎定的）</li><li>固定内存（数据库 Buffer Pool）</li><li>Direct I/O</li><li>并发数为 50（数据库连接数量）</li><li>Block Size 为 8kB（PostgreSQL 默认值）</li><li>每个进程打开 8 个文件</li></ul><p>对我的笔记本上的 SSD 和 HDD 做一个测试。不知道是不是因为对块设备的测试会随意写入块设备上的任何地址，测试完毕后两个磁盘上的系统全部都启动不了了 😧。</p><h3 id="ssd" tabindex="-1"><a class="header-anchor" href="#ssd"><span>SSD</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">$ <span class="token function">sudo</span> fio <span class="token punctuation">\\</span></span>
<span class="line"><span class="token parameter variable">--filename</span><span class="token operator">=</span>/dev/nvme0n1 <span class="token parameter variable">--direct</span><span class="token operator">=</span><span class="token number">1</span> <span class="token punctuation">\\</span></span>
<span class="line"><span class="token parameter variable">--rw</span><span class="token operator">=</span>randrw <span class="token parameter variable">--rwmixread</span><span class="token operator">=</span><span class="token number">75</span> <span class="token punctuation">\\</span></span>
<span class="line"><span class="token parameter variable">--ioengine</span><span class="token operator">=</span>psync <span class="token parameter variable">--bs</span><span class="token operator">=</span>8k <span class="token parameter variable">--lockmem</span><span class="token operator">=</span>4mb <span class="token punctuation">\\</span></span>
<span class="line"><span class="token parameter variable">--numjobs</span><span class="token operator">=</span><span class="token number">50</span> <span class="token parameter variable">--nrfiles</span><span class="token operator">=</span><span class="token number">8</span> <span class="token punctuation">\\</span></span>
<span class="line"><span class="token parameter variable">--runtime</span><span class="token operator">=</span><span class="token number">180</span> <span class="token parameter variable">--group_reporting</span> <span class="token parameter variable">--name</span><span class="token operator">=</span>TEST</span>
<span class="line"></span>
<span class="line">TEST: <span class="token punctuation">(</span>g<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>: <span class="token assign-left variable">rw</span><span class="token operator">=</span>randrw, <span class="token assign-left variable">bs</span><span class="token operator">=</span><span class="token punctuation">(</span>R<span class="token punctuation">)</span> 8192B-8192B, <span class="token punctuation">(</span>W<span class="token punctuation">)</span> 8192B-8192B, <span class="token punctuation">(</span>T<span class="token punctuation">)</span> 8192B-8192B, <span class="token assign-left variable">ioengine</span><span class="token operator">=</span>psync, <span class="token assign-left variable">iodepth</span><span class="token operator">=</span><span class="token number">1</span></span>
<span class="line"><span class="token punctuation">..</span>.</span>
<span class="line">fio-3.28</span>
<span class="line">Starting <span class="token number">50</span> processes</span>
<span class="line">Jobs: <span class="token number">50</span> <span class="token punctuation">(</span>f<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">)</span>: <span class="token punctuation">[</span>m<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">100.0</span>%<span class="token punctuation">]</span><span class="token punctuation">[</span>r<span class="token operator">=</span><span class="token number">77</span>.7MiB/s,w<span class="token operator">=</span><span class="token number">25</span>.7MiB/s<span class="token punctuation">]</span><span class="token punctuation">[</span>r<span class="token operator">=</span><span class="token number">9942</span>,w<span class="token operator">=</span><span class="token number">3289</span> IOPS<span class="token punctuation">]</span><span class="token punctuation">[</span>eta 00m:00s<span class="token punctuation">]</span></span>
<span class="line">TEST: <span class="token punctuation">(</span>groupid<span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">jobs</span><span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">)</span>: <span class="token assign-left variable">err</span><span class="token operator">=</span> <span class="token number">0</span>: <span class="token assign-left variable">pid</span><span class="token operator">=</span><span class="token number">35801</span>: Sun Feb <span class="token number">26</span> 00:00:00 <span class="token number">2023</span></span>
<span class="line">  read: <span class="token assign-left variable">IOPS</span><span class="token operator">=</span><span class="token number">49</span>.5k, <span class="token assign-left variable">BW</span><span class="token operator">=</span>387MiB/s <span class="token punctuation">(</span>406MB/s<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">68</span>.0GiB/180061msec<span class="token punctuation">)</span></span>
<span class="line">    clat <span class="token punctuation">(</span>usec<span class="token punctuation">)</span>: <span class="token assign-left variable">min</span><span class="token operator">=</span><span class="token number">30</span>, <span class="token assign-left variable">max</span><span class="token operator">=</span><span class="token number">538011</span>, <span class="token assign-left variable">avg</span><span class="token operator">=</span><span class="token number">909.71</span>, <span class="token assign-left variable">stdev</span><span class="token operator">=</span><span class="token number">5033.14</span></span>
<span class="line">     lat <span class="token punctuation">(</span>usec<span class="token punctuation">)</span>: <span class="token assign-left variable">min</span><span class="token operator">=</span><span class="token number">30</span>, <span class="token assign-left variable">max</span><span class="token operator">=</span><span class="token number">538012</span>, <span class="token assign-left variable">avg</span><span class="token operator">=</span><span class="token number">909.86</span>, <span class="token assign-left variable">stdev</span><span class="token operator">=</span><span class="token number">5033.15</span></span>
<span class="line">    clat percentiles <span class="token punctuation">(</span>usec<span class="token punctuation">)</span>:</span>
<span class="line">     <span class="token operator">|</span>  <span class="token assign-left variable">1.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>   <span class="token number">180</span><span class="token punctuation">]</span>,  <span class="token assign-left variable">5.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>   <span class="token number">231</span><span class="token punctuation">]</span>, <span class="token assign-left variable">10.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>   <span class="token number">265</span><span class="token punctuation">]</span>, <span class="token assign-left variable">20.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>   <span class="token number">297</span><span class="token punctuation">]</span>,</span>
<span class="line">     <span class="token operator">|</span> <span class="token assign-left variable">30.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>   <span class="token number">322</span><span class="token punctuation">]</span>, <span class="token assign-left variable">40.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>   <span class="token number">355</span><span class="token punctuation">]</span>, <span class="token assign-left variable">50.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>   <span class="token number">424</span><span class="token punctuation">]</span>, <span class="token assign-left variable">60.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>   <span class="token number">494</span><span class="token punctuation">]</span>,</span>
<span class="line">     <span class="token operator">|</span> <span class="token assign-left variable">70.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>   <span class="token number">545</span><span class="token punctuation">]</span>, <span class="token assign-left variable">80.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>   <span class="token number">685</span><span class="token punctuation">]</span>, <span class="token assign-left variable">90.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">1188</span><span class="token punctuation">]</span>, <span class="token assign-left variable">95.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">1450</span><span class="token punctuation">]</span>,</span>
<span class="line">     <span class="token operator">|</span> <span class="token assign-left variable">99.00th</span><span class="token operator">=</span><span class="token punctuation">[</span> <span class="token number">21365</span><span class="token punctuation">]</span>, <span class="token assign-left variable">99.50th</span><span class="token operator">=</span><span class="token punctuation">[</span> <span class="token number">25560</span><span class="token punctuation">]</span>, <span class="token assign-left variable">99.90th</span><span class="token operator">=</span><span class="token punctuation">[</span> <span class="token number">49546</span><span class="token punctuation">]</span>, <span class="token assign-left variable">99.95th</span><span class="token operator">=</span><span class="token punctuation">[</span> <span class="token number">56886</span><span class="token punctuation">]</span>,</span>
<span class="line">     <span class="token operator">|</span> <span class="token assign-left variable">99.99th</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">227541</span><span class="token punctuation">]</span></span>
<span class="line">   bw <span class="token punctuation">(</span>  KiB/s<span class="token punctuation">)</span>: <span class="token assign-left variable">min</span><span class="token operator">=</span> <span class="token number">2560</span>, <span class="token assign-left variable">max</span><span class="token operator">=</span><span class="token number">741643</span>, <span class="token assign-left variable">per</span><span class="token operator">=</span><span class="token number">100.00</span>%, <span class="token assign-left variable">avg</span><span class="token operator">=</span><span class="token number">397456.34</span>, <span class="token assign-left variable">stdev</span><span class="token operator">=</span><span class="token number">5721.71</span>, <span class="token assign-left variable">samples</span><span class="token operator">=</span><span class="token number">17944</span></span>
<span class="line">   iops        <span class="token builtin class-name">:</span> <span class="token assign-left variable">min</span><span class="token operator">=</span>  <span class="token number">320</span>, <span class="token assign-left variable">max</span><span class="token operator">=</span><span class="token number">92704</span>, <span class="token assign-left variable">avg</span><span class="token operator">=</span><span class="token number">49680.10</span>, <span class="token assign-left variable">stdev</span><span class="token operator">=</span><span class="token number">715.20</span>, <span class="token assign-left variable">samples</span><span class="token operator">=</span><span class="token number">17944</span></span>
<span class="line">  write: <span class="token assign-left variable">IOPS</span><span class="token operator">=</span><span class="token number">16</span>.5k, <span class="token assign-left variable">BW</span><span class="token operator">=</span>129MiB/s <span class="token punctuation">(</span>135MB/s<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">22</span>.7GiB/180061msec<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token number">0</span> zone resets</span>
<span class="line">    clat <span class="token punctuation">(</span>usec<span class="token punctuation">)</span>: <span class="token assign-left variable">min</span><span class="token operator">=</span><span class="token number">16</span>, <span class="token assign-left variable">max</span><span class="token operator">=</span><span class="token number">301913</span>, <span class="token assign-left variable">avg</span><span class="token operator">=</span><span class="token number">286.71</span>, <span class="token assign-left variable">stdev</span><span class="token operator">=</span><span class="token number">1422.05</span></span>
<span class="line">     lat <span class="token punctuation">(</span>usec<span class="token punctuation">)</span>: <span class="token assign-left variable">min</span><span class="token operator">=</span><span class="token number">16</span>, <span class="token assign-left variable">max</span><span class="token operator">=</span><span class="token number">301913</span>, <span class="token assign-left variable">avg</span><span class="token operator">=</span><span class="token number">287.16</span>, <span class="token assign-left variable">stdev</span><span class="token operator">=</span><span class="token number">1422.06</span></span>
<span class="line">    clat percentiles <span class="token punctuation">(</span>usec<span class="token punctuation">)</span>:</span>
<span class="line">     <span class="token operator">|</span>  <span class="token assign-left variable">1.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>   <span class="token number">31</span><span class="token punctuation">]</span>,  <span class="token assign-left variable">5.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>   <span class="token number">60</span><span class="token punctuation">]</span>, <span class="token assign-left variable">10.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>   <span class="token number">88</span><span class="token punctuation">]</span>, <span class="token assign-left variable">20.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">147</span><span class="token punctuation">]</span>,</span>
<span class="line">     <span class="token operator">|</span> <span class="token assign-left variable">30.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">188</span><span class="token punctuation">]</span>, <span class="token assign-left variable">40.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">210</span><span class="token punctuation">]</span>, <span class="token assign-left variable">50.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">225</span><span class="token punctuation">]</span>, <span class="token assign-left variable">60.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">239</span><span class="token punctuation">]</span>,</span>
<span class="line">     <span class="token operator">|</span> <span class="token assign-left variable">70.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">269</span><span class="token punctuation">]</span>, <span class="token assign-left variable">80.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">359</span><span class="token punctuation">]</span>, <span class="token assign-left variable">90.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">400</span><span class="token punctuation">]</span>, <span class="token assign-left variable">95.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">424</span><span class="token punctuation">]</span>,</span>
<span class="line">     <span class="token operator">|</span> <span class="token assign-left variable">99.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">668</span><span class="token punctuation">]</span>, <span class="token assign-left variable">99.50th</span><span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">701</span><span class="token punctuation">]</span>, <span class="token assign-left variable">99.90th</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">31327</span><span class="token punctuation">]</span>, <span class="token assign-left variable">99.95th</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">38536</span><span class="token punctuation">]</span>,</span>
<span class="line">     <span class="token operator">|</span> <span class="token assign-left variable">99.99th</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">44827</span><span class="token punctuation">]</span></span>
<span class="line">   bw <span class="token punctuation">(</span>  KiB/s<span class="token punctuation">)</span>: <span class="token assign-left variable">min</span><span class="token operator">=</span>  <span class="token number">800</span>, <span class="token assign-left variable">max</span><span class="token operator">=</span><span class="token number">272308</span>, <span class="token assign-left variable">per</span><span class="token operator">=</span><span class="token number">100.00</span>%, <span class="token assign-left variable">avg</span><span class="token operator">=</span><span class="token number">133434.13</span>, <span class="token assign-left variable">stdev</span><span class="token operator">=</span><span class="token number">1912.32</span>, <span class="token assign-left variable">samples</span><span class="token operator">=</span><span class="token number">17824</span></span>
<span class="line">   iops        <span class="token builtin class-name">:</span> <span class="token assign-left variable">min</span><span class="token operator">=</span>  <span class="token number">100</span>, <span class="token assign-left variable">max</span><span class="token operator">=</span><span class="token number">34036</span>, <span class="token assign-left variable">avg</span><span class="token operator">=</span><span class="token number">16677.77</span>, <span class="token assign-left variable">stdev</span><span class="token operator">=</span><span class="token number">239.03</span>, <span class="token assign-left variable">samples</span><span class="token operator">=</span><span class="token number">17824</span></span>
<span class="line">  lat <span class="token punctuation">(</span>usec<span class="token punctuation">)</span>   <span class="token builtin class-name">:</span> <span class="token assign-left variable">20</span><span class="token operator">=</span><span class="token number">0.03</span>%, <span class="token assign-left variable">50</span><span class="token operator">=</span><span class="token number">0.88</span>%, <span class="token assign-left variable">100</span><span class="token operator">=</span><span class="token number">2.14</span>%, <span class="token assign-left variable">250</span><span class="token operator">=</span><span class="token number">19.06</span>%, <span class="token assign-left variable">500</span><span class="token operator">=</span><span class="token number">48.57</span>%</span>
<span class="line">  lat <span class="token punctuation">(</span>usec<span class="token punctuation">)</span>   <span class="token builtin class-name">:</span> <span class="token assign-left variable">750</span><span class="token operator">=</span><span class="token number">15.33</span>%, <span class="token assign-left variable">1000</span><span class="token operator">=</span><span class="token number">2.71</span>%</span>
<span class="line">  lat <span class="token punctuation">(</span>msec<span class="token punctuation">)</span>   <span class="token builtin class-name">:</span> <span class="token assign-left variable">2</span><span class="token operator">=</span><span class="token number">10.16</span>%, <span class="token assign-left variable">4</span><span class="token operator">=</span><span class="token number">0.11</span>%, <span class="token assign-left variable">10</span><span class="token operator">=</span><span class="token number">0.07</span>%, <span class="token assign-left variable">20</span><span class="token operator">=</span><span class="token number">0.08</span>%, <span class="token assign-left variable">50</span><span class="token operator">=</span><span class="token number">0.80</span>%</span>
<span class="line">  lat <span class="token punctuation">(</span>msec<span class="token punctuation">)</span>   <span class="token builtin class-name">:</span> <span class="token assign-left variable">100</span><span class="token operator">=</span><span class="token number">0.06</span>%, <span class="token assign-left variable">250</span><span class="token operator">=</span><span class="token number">0.01</span>%, <span class="token assign-left variable">500</span><span class="token operator">=</span><span class="token number">0.01</span>%, <span class="token assign-left variable">750</span><span class="token operator">=</span><span class="token number">0.01</span>%</span>
<span class="line">  cpu          <span class="token builtin class-name">:</span> <span class="token assign-left variable">usr</span><span class="token operator">=</span><span class="token number">0.86</span>%, <span class="token assign-left variable">sys</span><span class="token operator">=</span><span class="token number">1.62</span>%, <span class="token assign-left variable">ctx</span><span class="token operator">=</span><span class="token number">11923220</span>, <span class="token assign-left variable">majf</span><span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">minf</span><span class="token operator">=</span><span class="token number">950</span></span>
<span class="line">  IO depths    <span class="token builtin class-name">:</span> <span class="token assign-left variable">1</span><span class="token operator">=</span><span class="token number">100.0</span>%, <span class="token assign-left variable">2</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">4</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">8</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">16</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">32</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token operator">&gt;=</span><span class="token number">64</span><span class="token operator">=</span><span class="token number">0.0</span>%</span>
<span class="line">     submit    <span class="token builtin class-name">:</span> <span class="token assign-left variable">0</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">4</span><span class="token operator">=</span><span class="token number">100.0</span>%, <span class="token assign-left variable">8</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">16</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">32</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">64</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token operator">&gt;=</span><span class="token number">64</span><span class="token operator">=</span><span class="token number">0.0</span>%</span>
<span class="line">     complete  <span class="token builtin class-name">:</span> <span class="token assign-left variable">0</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">4</span><span class="token operator">=</span><span class="token number">100.0</span>%, <span class="token assign-left variable">8</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">16</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">32</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">64</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token operator">&gt;=</span><span class="token number">64</span><span class="token operator">=</span><span class="token number">0.0</span>%</span>
<span class="line">     issued rwts: <span class="token assign-left variable">total</span><span class="token operator">=</span><span class="token number">8919086,2974324</span>,0,0 <span class="token assign-left variable">short</span><span class="token operator">=</span><span class="token number">0,0</span>,0,0 <span class="token assign-left variable">dropped</span><span class="token operator">=</span><span class="token number">0,0</span>,0,0</span>
<span class="line">     latency   <span class="token builtin class-name">:</span> <span class="token assign-left variable">target</span><span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">window</span><span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">percentile</span><span class="token operator">=</span><span class="token number">100.00</span>%, <span class="token assign-left variable">depth</span><span class="token operator">=</span><span class="token number">1</span></span>
<span class="line"></span>
<span class="line">Run status group <span class="token number">0</span> <span class="token punctuation">(</span>all <span class="token function">jobs</span><span class="token punctuation">)</span>:</span>
<span class="line">   READ: <span class="token assign-left variable">bw</span><span class="token operator">=</span>387MiB/s <span class="token punctuation">(</span>406MB/s<span class="token punctuation">)</span>, 387MiB/s-387MiB/s <span class="token punctuation">(</span>406MB/s-406MB/s<span class="token punctuation">)</span>, <span class="token assign-left variable">io</span><span class="token operator">=</span><span class="token number">68</span>.0GiB <span class="token punctuation">(</span><span class="token number">73</span>.1GB<span class="token punctuation">)</span>, <span class="token assign-left variable">run</span><span class="token operator">=</span><span class="token number">180061</span>-180061msec</span>
<span class="line">  WRITE: <span class="token assign-left variable">bw</span><span class="token operator">=</span>129MiB/s <span class="token punctuation">(</span>135MB/s<span class="token punctuation">)</span>, 129MiB/s-129MiB/s <span class="token punctuation">(</span>135MB/s-135MB/s<span class="token punctuation">)</span>, <span class="token assign-left variable">io</span><span class="token operator">=</span><span class="token number">22</span>.7GiB <span class="token punctuation">(</span><span class="token number">24</span>.4GB<span class="token punctuation">)</span>, <span class="token assign-left variable">run</span><span class="token operator">=</span><span class="token number">180061</span>-180061msec</span>
<span class="line"></span>
<span class="line">Disk stats <span class="token punctuation">(</span>read/write<span class="token punctuation">)</span>:</span>
<span class="line">  nvme0n1: <span class="token assign-left variable">ios</span><span class="token operator">=</span><span class="token number">8919334</span>/2974725, <span class="token assign-left variable">merge</span><span class="token operator">=</span><span class="token number">0</span>/234, <span class="token assign-left variable">ticks</span><span class="token operator">=</span><span class="token number">7912550</span>/807409, <span class="token assign-left variable">in_queue</span><span class="token operator">=</span><span class="token number">8720940</span>, <span class="token assign-left variable">util</span><span class="token operator">=</span><span class="token number">99.92</span>%</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到读 IOPS 约为 49.5k，读带宽约为 387MiB/s (406MB/s)；写 IOPS 约为 16.5k，写带宽约为 129MiB/s (135MB/s)。</p><h3 id="hdd" tabindex="-1"><a class="header-anchor" href="#hdd"><span>HDD</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">$ <span class="token function">sudo</span> fio <span class="token punctuation">\\</span></span>
<span class="line"><span class="token parameter variable">--filename</span><span class="token operator">=</span>/dev/sda <span class="token parameter variable">--direct</span><span class="token operator">=</span><span class="token number">1</span> <span class="token punctuation">\\</span></span>
<span class="line"><span class="token parameter variable">--rw</span><span class="token operator">=</span>randrw <span class="token parameter variable">--rwmixread</span><span class="token operator">=</span><span class="token number">75</span> <span class="token punctuation">\\</span></span>
<span class="line"><span class="token parameter variable">--ioengine</span><span class="token operator">=</span>psync <span class="token parameter variable">--bs</span><span class="token operator">=</span>8k <span class="token parameter variable">--lockmem</span><span class="token operator">=</span>4mb <span class="token punctuation">\\</span></span>
<span class="line"><span class="token parameter variable">--numjobs</span><span class="token operator">=</span><span class="token number">50</span> <span class="token parameter variable">--nrfiles</span><span class="token operator">=</span><span class="token number">8</span> <span class="token punctuation">\\</span></span>
<span class="line"><span class="token parameter variable">--runtime</span><span class="token operator">=</span><span class="token number">180</span> <span class="token parameter variable">--group_reporting</span> <span class="token parameter variable">--name</span><span class="token operator">=</span>TEST</span>
<span class="line"></span>
<span class="line">TEST: <span class="token punctuation">(</span>g<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>: <span class="token assign-left variable">rw</span><span class="token operator">=</span>randrw, <span class="token assign-left variable">bs</span><span class="token operator">=</span><span class="token punctuation">(</span>R<span class="token punctuation">)</span> 8192B-8192B, <span class="token punctuation">(</span>W<span class="token punctuation">)</span> 8192B-8192B, <span class="token punctuation">(</span>T<span class="token punctuation">)</span> 8192B-8192B, <span class="token assign-left variable">ioengine</span><span class="token operator">=</span>psync, <span class="token assign-left variable">iodepth</span><span class="token operator">=</span><span class="token number">1</span></span>
<span class="line"><span class="token punctuation">..</span>.</span>
<span class="line">fio-3.28</span>
<span class="line">Starting <span class="token number">50</span> processes</span>
<span class="line">Jobs: <span class="token number">50</span> <span class="token punctuation">(</span>f<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">)</span>: <span class="token punctuation">[</span>m<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">100.0</span>%<span class="token punctuation">]</span><span class="token punctuation">[</span>r<span class="token operator">=</span>792KiB/s,w<span class="token operator">=</span>256KiB/s<span class="token punctuation">]</span><span class="token punctuation">[</span>r<span class="token operator">=</span><span class="token number">99</span>,w<span class="token operator">=</span><span class="token number">32</span> IOPS<span class="token punctuation">]</span><span class="token punctuation">[</span>eta 00m:00s<span class="token punctuation">]</span></span>
<span class="line">TEST: <span class="token punctuation">(</span>groupid<span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">jobs</span><span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">)</span>: <span class="token assign-left variable">err</span><span class="token operator">=</span> <span class="token number">0</span>: <span class="token assign-left variable">pid</span><span class="token operator">=</span><span class="token number">39682</span>: Sun Feb <span class="token number">26</span> 00:12:59 <span class="token number">2023</span></span>
<span class="line">  read: <span class="token assign-left variable">IOPS</span><span class="token operator">=</span><span class="token number">93</span>, <span class="token assign-left variable">BW</span><span class="token operator">=</span>750KiB/s <span class="token punctuation">(</span>768kB/s<span class="token punctuation">)</span><span class="token punctuation">(</span>132MiB/180761msec<span class="token punctuation">)</span></span>
<span class="line">    clat <span class="token punctuation">(</span>msec<span class="token punctuation">)</span>: <span class="token assign-left variable">min</span><span class="token operator">=</span><span class="token number">17</span>, <span class="token assign-left variable">max</span><span class="token operator">=</span><span class="token number">2528</span>, <span class="token assign-left variable">avg</span><span class="token operator">=</span><span class="token number">462.65</span>, <span class="token assign-left variable">stdev</span><span class="token operator">=</span><span class="token number">347.01</span></span>
<span class="line">     lat <span class="token punctuation">(</span>msec<span class="token punctuation">)</span>: <span class="token assign-left variable">min</span><span class="token operator">=</span><span class="token number">17</span>, <span class="token assign-left variable">max</span><span class="token operator">=</span><span class="token number">2528</span>, <span class="token assign-left variable">avg</span><span class="token operator">=</span><span class="token number">462.65</span>, <span class="token assign-left variable">stdev</span><span class="token operator">=</span><span class="token number">347.01</span></span>
<span class="line">    clat percentiles <span class="token punctuation">(</span>msec<span class="token punctuation">)</span>:</span>
<span class="line">     <span class="token operator">|</span>  <span class="token assign-left variable">1.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>   <span class="token number">56</span><span class="token punctuation">]</span>,  <span class="token assign-left variable">5.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>   <span class="token number">99</span><span class="token punctuation">]</span>, <span class="token assign-left variable">10.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">136</span><span class="token punctuation">]</span>, <span class="token assign-left variable">20.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">192</span><span class="token punctuation">]</span>,</span>
<span class="line">     <span class="token operator">|</span> <span class="token assign-left variable">30.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">243</span><span class="token punctuation">]</span>, <span class="token assign-left variable">40.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">300</span><span class="token punctuation">]</span>, <span class="token assign-left variable">50.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">368</span><span class="token punctuation">]</span>, <span class="token assign-left variable">60.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">447</span><span class="token punctuation">]</span>,</span>
<span class="line">     <span class="token operator">|</span> <span class="token assign-left variable">70.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">550</span><span class="token punctuation">]</span>, <span class="token assign-left variable">80.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">684</span><span class="token punctuation">]</span>, <span class="token assign-left variable">90.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">911</span><span class="token punctuation">]</span>, <span class="token assign-left variable">95.00th</span><span class="token operator">=</span><span class="token punctuation">[</span> <span class="token number">1150</span><span class="token punctuation">]</span>,</span>
<span class="line">     <span class="token operator">|</span> <span class="token assign-left variable">99.00th</span><span class="token operator">=</span><span class="token punctuation">[</span> <span class="token number">1737</span><span class="token punctuation">]</span>, <span class="token assign-left variable">99.50th</span><span class="token operator">=</span><span class="token punctuation">[</span> <span class="token number">1989</span><span class="token punctuation">]</span>, <span class="token assign-left variable">99.90th</span><span class="token operator">=</span><span class="token punctuation">[</span> <span class="token number">2232</span><span class="token punctuation">]</span>, <span class="token assign-left variable">99.95th</span><span class="token operator">=</span><span class="token punctuation">[</span> <span class="token number">2265</span><span class="token punctuation">]</span>,</span>
<span class="line">     <span class="token operator">|</span> <span class="token assign-left variable">99.99th</span><span class="token operator">=</span><span class="token punctuation">[</span> <span class="token number">2433</span><span class="token punctuation">]</span></span>
<span class="line">   bw <span class="token punctuation">(</span>  KiB/s<span class="token punctuation">)</span>: <span class="token assign-left variable">min</span><span class="token operator">=</span>  <span class="token number">749</span>, <span class="token assign-left variable">max</span><span class="token operator">=</span> <span class="token number">2750</span>, <span class="token assign-left variable">per</span><span class="token operator">=</span><span class="token number">100.00</span>%, <span class="token assign-left variable">avg</span><span class="token operator">=</span><span class="token number">1074.83</span>, <span class="token assign-left variable">stdev</span><span class="token operator">=</span> <span class="token number">8.92</span>, <span class="token assign-left variable">samples</span><span class="token operator">=</span><span class="token number">12554</span></span>
<span class="line">   iops        <span class="token builtin class-name">:</span> <span class="token assign-left variable">min</span><span class="token operator">=</span>   <span class="token number">50</span>, <span class="token assign-left variable">max</span><span class="token operator">=</span>  <span class="token number">342</span>, <span class="token assign-left variable">avg</span><span class="token operator">=</span><span class="token number">132.58</span>, <span class="token assign-left variable">stdev</span><span class="token operator">=</span> <span class="token number">1.13</span>, <span class="token assign-left variable">samples</span><span class="token operator">=</span><span class="token number">12554</span></span>
<span class="line">  write: <span class="token assign-left variable">IOPS</span><span class="token operator">=</span><span class="token number">31</span>, <span class="token assign-left variable">BW</span><span class="token operator">=</span>253KiB/s <span class="token punctuation">(</span>259kB/s<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">44</span>.6MiB/180761msec<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token number">0</span> zone resets</span>
<span class="line">    clat <span class="token punctuation">(</span>usec<span class="token punctuation">)</span>: <span class="token assign-left variable">min</span><span class="token operator">=</span><span class="token number">131</span>, <span class="token assign-left variable">max</span><span class="token operator">=</span><span class="token number">1963</span>.7k, <span class="token assign-left variable">avg</span><span class="token operator">=</span><span class="token number">205394.16</span>, <span class="token assign-left variable">stdev</span><span class="token operator">=</span><span class="token number">184952.85</span></span>
<span class="line">     lat <span class="token punctuation">(</span>usec<span class="token punctuation">)</span>: <span class="token assign-left variable">min</span><span class="token operator">=</span><span class="token number">133</span>, <span class="token assign-left variable">max</span><span class="token operator">=</span><span class="token number">1963</span>.7k, <span class="token assign-left variable">avg</span><span class="token operator">=</span><span class="token number">205395.00</span>, <span class="token assign-left variable">stdev</span><span class="token operator">=</span><span class="token number">184952.86</span></span>
<span class="line">    clat percentiles <span class="token punctuation">(</span>msec<span class="token punctuation">)</span>:</span>
<span class="line">     <span class="token operator">|</span>  <span class="token assign-left variable">1.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>    <span class="token number">5</span><span class="token punctuation">]</span>,  <span class="token assign-left variable">5.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>   <span class="token number">26</span><span class="token punctuation">]</span>, <span class="token assign-left variable">10.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>   <span class="token number">38</span><span class="token punctuation">]</span>, <span class="token assign-left variable">20.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>   <span class="token number">66</span><span class="token punctuation">]</span>,</span>
<span class="line">     <span class="token operator">|</span> <span class="token assign-left variable">30.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>   <span class="token number">95</span><span class="token punctuation">]</span>, <span class="token assign-left variable">40.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">129</span><span class="token punctuation">]</span>, <span class="token assign-left variable">50.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">165</span><span class="token punctuation">]</span>, <span class="token assign-left variable">60.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">203</span><span class="token punctuation">]</span>,</span>
<span class="line">     <span class="token operator">|</span> <span class="token assign-left variable">70.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">239</span><span class="token punctuation">]</span>, <span class="token assign-left variable">80.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">288</span><span class="token punctuation">]</span>, <span class="token assign-left variable">90.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">418</span><span class="token punctuation">]</span>, <span class="token assign-left variable">95.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">584</span><span class="token punctuation">]</span>,</span>
<span class="line">     <span class="token operator">|</span> <span class="token assign-left variable">99.00th</span><span class="token operator">=</span><span class="token punctuation">[</span>  <span class="token number">902</span><span class="token punctuation">]</span>, <span class="token assign-left variable">99.50th</span><span class="token operator">=</span><span class="token punctuation">[</span> <span class="token number">1070</span><span class="token punctuation">]</span>, <span class="token assign-left variable">99.90th</span><span class="token operator">=</span><span class="token punctuation">[</span> <span class="token number">1485</span><span class="token punctuation">]</span>, <span class="token assign-left variable">99.95th</span><span class="token operator">=</span><span class="token punctuation">[</span> <span class="token number">1519</span><span class="token punctuation">]</span>,</span>
<span class="line">     <span class="token operator">|</span> <span class="token assign-left variable">99.99th</span><span class="token operator">=</span><span class="token punctuation">[</span> <span class="token number">1972</span><span class="token punctuation">]</span></span>
<span class="line">   bw <span class="token punctuation">(</span>  KiB/s<span class="token punctuation">)</span>: <span class="token assign-left variable">min</span><span class="token operator">=</span>  <span class="token number">752</span>, <span class="token assign-left variable">max</span><span class="token operator">=</span> <span class="token number">2368</span>, <span class="token assign-left variable">per</span><span class="token operator">=</span><span class="token number">100.00</span>%, <span class="token assign-left variable">avg</span><span class="token operator">=</span><span class="token number">968.86</span>, <span class="token assign-left variable">stdev</span><span class="token operator">=</span> <span class="token number">7.28</span>, <span class="token assign-left variable">samples</span><span class="token operator">=</span><span class="token number">4698</span></span>
<span class="line">   iops        <span class="token builtin class-name">:</span> <span class="token assign-left variable">min</span><span class="token operator">=</span>   <span class="token number">54</span>, <span class="token assign-left variable">max</span><span class="token operator">=</span>  <span class="token number">296</span>, <span class="token assign-left variable">avg</span><span class="token operator">=</span><span class="token number">119.45</span>, <span class="token assign-left variable">stdev</span><span class="token operator">=</span> <span class="token number">0.93</span>, <span class="token assign-left variable">samples</span><span class="token operator">=</span><span class="token number">4698</span></span>
<span class="line">  lat <span class="token punctuation">(</span>usec<span class="token punctuation">)</span>   <span class="token builtin class-name">:</span> <span class="token assign-left variable">250</span><span class="token operator">=</span><span class="token number">0.02</span>%, <span class="token assign-left variable">500</span><span class="token operator">=</span><span class="token number">0.05</span>%, <span class="token assign-left variable">750</span><span class="token operator">=</span><span class="token number">0.03</span>%, <span class="token assign-left variable">1000</span><span class="token operator">=</span><span class="token number">0.05</span>%</span>
<span class="line">  lat <span class="token punctuation">(</span>msec<span class="token punctuation">)</span>   <span class="token builtin class-name">:</span> <span class="token assign-left variable">2</span><span class="token operator">=</span><span class="token number">0.08</span>%, <span class="token assign-left variable">4</span><span class="token operator">=</span><span class="token number">0.02</span>%, <span class="token assign-left variable">10</span><span class="token operator">=</span><span class="token number">0.11</span>%, <span class="token assign-left variable">20</span><span class="token operator">=</span><span class="token number">0.48</span>%, <span class="token assign-left variable">50</span><span class="token operator">=</span><span class="token number">3.41</span>%</span>
<span class="line">  lat <span class="token punctuation">(</span>msec<span class="token punctuation">)</span>   <span class="token builtin class-name">:</span> <span class="token assign-left variable">100</span><span class="token operator">=</span><span class="token number">7.69</span>%, <span class="token assign-left variable">250</span><span class="token operator">=</span><span class="token number">29.87</span>%, <span class="token assign-left variable">500</span><span class="token operator">=</span><span class="token number">30.70</span>%, <span class="token assign-left variable">750</span><span class="token operator">=</span><span class="token number">14.58</span>%, <span class="token assign-left variable">1000</span><span class="token operator">=</span><span class="token number">6.99</span>%</span>
<span class="line">  lat <span class="token punctuation">(</span>msec<span class="token punctuation">)</span>   <span class="token builtin class-name">:</span> <span class="token assign-left variable">2000</span><span class="token operator">=</span><span class="token number">5.57</span>%, <span class="token operator">&gt;=</span><span class="token number">2000</span><span class="token operator">=</span><span class="token number">0.35</span>%</span>
<span class="line">  cpu          <span class="token builtin class-name">:</span> <span class="token assign-left variable">usr</span><span class="token operator">=</span><span class="token number">0.01</span>%, <span class="token assign-left variable">sys</span><span class="token operator">=</span><span class="token number">0.01</span>%, <span class="token assign-left variable">ctx</span><span class="token operator">=</span><span class="token number">22832</span>, <span class="token assign-left variable">majf</span><span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">minf</span><span class="token operator">=</span><span class="token number">812</span></span>
<span class="line">  IO depths    <span class="token builtin class-name">:</span> <span class="token assign-left variable">1</span><span class="token operator">=</span><span class="token number">100.0</span>%, <span class="token assign-left variable">2</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">4</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">8</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">16</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">32</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token operator">&gt;=</span><span class="token number">64</span><span class="token operator">=</span><span class="token number">0.0</span>%</span>
<span class="line">     submit    <span class="token builtin class-name">:</span> <span class="token assign-left variable">0</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">4</span><span class="token operator">=</span><span class="token number">100.0</span>%, <span class="token assign-left variable">8</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">16</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">32</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">64</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token operator">&gt;=</span><span class="token number">64</span><span class="token operator">=</span><span class="token number">0.0</span>%</span>
<span class="line">     complete  <span class="token builtin class-name">:</span> <span class="token assign-left variable">0</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">4</span><span class="token operator">=</span><span class="token number">100.0</span>%, <span class="token assign-left variable">8</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">16</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">32</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token assign-left variable">64</span><span class="token operator">=</span><span class="token number">0.0</span>%, <span class="token operator">&gt;=</span><span class="token number">64</span><span class="token operator">=</span><span class="token number">0.0</span>%</span>
<span class="line">     issued rwts: <span class="token assign-left variable">total</span><span class="token operator">=</span><span class="token number">16952,5706</span>,0,0 <span class="token assign-left variable">short</span><span class="token operator">=</span><span class="token number">0,0</span>,0,0 <span class="token assign-left variable">dropped</span><span class="token operator">=</span><span class="token number">0,0</span>,0,0</span>
<span class="line">     latency   <span class="token builtin class-name">:</span> <span class="token assign-left variable">target</span><span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">window</span><span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">percentile</span><span class="token operator">=</span><span class="token number">100.00</span>%, <span class="token assign-left variable">depth</span><span class="token operator">=</span><span class="token number">1</span></span>
<span class="line"></span>
<span class="line">Run status group <span class="token number">0</span> <span class="token punctuation">(</span>all <span class="token function">jobs</span><span class="token punctuation">)</span>:</span>
<span class="line">   READ: <span class="token assign-left variable">bw</span><span class="token operator">=</span>750KiB/s <span class="token punctuation">(</span>768kB/s<span class="token punctuation">)</span>, 750KiB/s-750KiB/s <span class="token punctuation">(</span>768kB/s-768kB/s<span class="token punctuation">)</span>, <span class="token assign-left variable">io</span><span class="token operator">=</span>132MiB <span class="token punctuation">(</span>139MB<span class="token punctuation">)</span>, <span class="token assign-left variable">run</span><span class="token operator">=</span><span class="token number">180761</span>-180761msec</span>
<span class="line">  WRITE: <span class="token assign-left variable">bw</span><span class="token operator">=</span>253KiB/s <span class="token punctuation">(</span>259kB/s<span class="token punctuation">)</span>, 253KiB/s-253KiB/s <span class="token punctuation">(</span>259kB/s-259kB/s<span class="token punctuation">)</span>, <span class="token assign-left variable">io</span><span class="token operator">=</span><span class="token number">44</span>.6MiB <span class="token punctuation">(</span><span class="token number">46</span>.7MB<span class="token punctuation">)</span>, <span class="token assign-left variable">run</span><span class="token operator">=</span><span class="token number">180761</span>-180761msec</span>
<span class="line"></span>
<span class="line">Disk stats <span class="token punctuation">(</span>read/write<span class="token punctuation">)</span>:</span>
<span class="line">  sda: <span class="token assign-left variable">ios</span><span class="token operator">=</span><span class="token number">17132</span>/5708, <span class="token assign-left variable">merge</span><span class="token operator">=</span><span class="token number">0</span>/0, <span class="token assign-left variable">ticks</span><span class="token operator">=</span><span class="token number">7940082</span>/1173972, <span class="token assign-left variable">in_queue</span><span class="token operator">=</span><span class="token number">9116371</span>, <span class="token assign-left variable">util</span><span class="token operator">=</span><span class="token number">100.00</span>%</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到读 IOPS 约为 93，读带宽约为 750KiB/s (768kB/s)；写 IOPS 约为 31，写带宽约为 253KiB/s (259kB/s)。简直和 SSD 不在一个数量级。</p><h2 id="references" tabindex="-1"><a class="header-anchor" href="#references"><span>References</span></a></h2><p><a href="https://linux.die.net/man/1/fio" target="_blank" rel="noopener noreferrer">fio(1) - Linux man page</a></p><p><a href="https://www.modb.pro/db/337456" target="_blank" rel="noopener noreferrer">墨天轮 - 服务器 I/O 测试工具 - fio 介绍及示例</a></p><p><a href="https://github.com/axboe/fio" target="_blank" rel="noopener noreferrer">GitHub - fio</a></p>`,48)]))}const i=a(t,[["render",l],["__file","fio.html.vue"]]),r=JSON.parse('{"path":"/notes/Linux/fio.html","title":"fio","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"Background","slug":"background","link":"#background","children":[]},{"level":2,"title":"Usage","slug":"usage","link":"#usage","children":[{"level":3,"title":"Device / File","slug":"device-file","link":"#device-file","children":[]},{"level":3,"title":"Read / Write Pattern","slug":"read-write-pattern","link":"#read-write-pattern","children":[]},{"level":3,"title":"Block Size","slug":"block-size","link":"#block-size","children":[]},{"level":3,"title":"Parallelism","slug":"parallelism","link":"#parallelism","children":[]},{"level":3,"title":"I/O Engine","slug":"i-o-engine","link":"#i-o-engine","children":[]},{"level":3,"title":"Direct / Buffer","slug":"direct-buffer","link":"#direct-buffer","children":[]},{"level":3,"title":"Initialization","slug":"initialization","link":"#initialization","children":[]},{"level":3,"title":"Stop Condition","slug":"stop-condition","link":"#stop-condition","children":[]}]},{"level":2,"title":"Results","slug":"results","link":"#results","children":[{"level":3,"title":"SSD","slug":"ssd","link":"#ssd","children":[]},{"level":3,"title":"HDD","slug":"hdd","link":"#hdd","children":[]}]},{"level":2,"title":"References","slug":"references","link":"#references","children":[]}],"git":{},"filePathRelative":"notes/Linux/fio.md"}');export{i as comp,r as data};
