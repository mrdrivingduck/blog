import{_ as s,c as n,a,o as l}from"./app-BeHGwf2X.js";const t={};function i(r,e){return l(),n("div",null,e[0]||(e[0]=[a(`<h1 id="network-ftp" tabindex="-1"><a class="header-anchor" href="#network-ftp"><span>Network - FTP</span></a></h1><p>Created by : Mr Dk.</p><p>2020 / 12 / 17 11:33</p><p>Nanjing, Jiangsu, China</p><hr><h2 id="about" tabindex="-1"><a class="header-anchor" href="#about"><span>About</span></a></h2><p>FTP (File Transfer Protocolï¼Œæ–‡ä»¶ä¼ è¾“åè®®) æ˜¯ TCP/IP åè®®ç»„ä¸­çš„åè®®ä¹‹ä¸€ã€‚FTP åè®®åŒ…æ‹¬ä¸¤ä¸ªç»„æˆéƒ¨åˆ†ï¼Œå…¶ä¸€ä¸º FTP æœåŠ¡å™¨ï¼Œå…¶äºŒä¸º FTP å®¢æˆ·ç«¯ã€‚å…¶ä¸­ FTP æœåŠ¡å™¨ç”¨æ¥å­˜å‚¨æ–‡ä»¶ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨ FTP å®¢æˆ·ç«¯é€šè¿‡ FTP åè®®è®¿é—®ä½äº FTP æœåŠ¡å™¨ä¸Šçš„èµ„æºã€‚åœ¨å¼€å‘ç½‘ç«™çš„æ—¶å€™ï¼Œé€šå¸¸ä½¿ç”¨ FTP åè®®æŠŠç½‘é¡µæˆ–ç¨‹åºä¸Šä¼ åˆ° Web æœåŠ¡å™¨ä¸Šã€‚æ­¤å¤–ï¼Œç”±äº FTP ä¼ è¾“æ•ˆç‡éå¸¸é«˜ï¼Œåœ¨ç½‘ç»œä¸Šä¼ è¾“å¤§çš„æ–‡ä»¶æ—¶ï¼Œä¸€èˆ¬ä¹Ÿé‡‡ç”¨è¯¥åè®®ã€‚</p><p>FTP ä½¿ç”¨æ˜æ–‡ä¼ è¾“æ–‡ä»¶ï¼Œè€Œ SFTP (SSH File Transfer Protocol) å’Œ SCP (Secure Copy) ä½¿ç”¨åŠ å¯†é“¾è·¯ä¼ è¾“æ–‡ä»¶ï¼Œä¸¤è€…éƒ½æ˜¯ SSH (Secure Shell) æœåŠ¡çš„ä¸€éƒ¨åˆ†ã€‚</p><ul><li>SFTP å¯é æ€§é«˜ï¼Œå¯ <strong>æ–­ç‚¹ç»­ä¼ </strong>ï¼Œæ•ˆç‡æ¯” FTP ä½ä¸€äº›ï¼Œä½†æ›´å®‰å…¨</li><li>SCP éœ€è¦çŸ¥é“ç›®æ ‡çš„è¯¦ç»†ç›®å½•ï¼Œä¸å¯æ–­ç‚¹ç»­ä¼ ï¼Œæ¯” SFTP æ›´ä¸ºè½»é‡çº§</li></ul><h2 id="working-mode" tabindex="-1"><a class="header-anchor" href="#working-mode"><span>Working Mode</span></a></h2><p>FTP ä½¿ç”¨ç†ŸçŸ¥ç«¯å£ TCP 21 ä½œä¸ºæ§åˆ¶ç«¯å£ï¼Œå‘é€æˆ–æ¥å—å‘½ä»¤ã€‚ä½†æ˜¯æ ¹æ®å·¥ä½œæ¨¡å¼ï¼Œè¿˜ä¼šå¼€è¾Ÿå…¶å®ƒç«¯å£ä½œä¸ºæ•°æ®ç«¯å£ã€‚</p><h3 id="port-mode" tabindex="-1"><a class="header-anchor" href="#port-mode"><span>Port Mode</span></a></h3><p>FTP çš„ <strong>ä¸»åŠ¨æ¨¡å¼</strong>ã€‚å®¢æˆ·ç«¯é€šè¿‡ 21 ç«¯å£è¿æ¥åˆ°æœåŠ¡å™¨ã€‚å®¢æˆ·ç«¯åœ¨è‡ªèº«ä¸»æœºä¸Šå¼€è¾Ÿç«¯å£ç”¨äºæ•°æ®è¿æ¥ï¼Œå¹¶å°†è¿™ä¸ªç«¯å£é€šè¿‡ <code>PORT</code> å‘½ä»¤å‘Šè¯‰æœåŠ¡å™¨ã€‚æœåŠ¡å™¨ä½¿ç”¨è‡ªå·±çš„ TCP 20 ç«¯å£è¿æ¥åˆ°å®¢æˆ·ç«¯çš„æ•°æ®ç«¯å£ä¼ é€æ•°æ®ã€‚</p><blockquote><p>å¦‚æœå®¢æˆ·ç«¯æ²¡æœ‰å…¬ç½‘åœ°å€ (åœ¨å†…ç½‘ä»¥å†…)ï¼Œé‚£ä¹ˆæœåŠ¡å™¨æ²¡æœ‰åŠæ³•è¿æ¥åˆ°å®¢æˆ·ç«¯å¼€è¾Ÿçš„æ•°æ®ç«¯å£ä¸Šã€‚(é™¤éèƒ½å¤Ÿæ˜¾å¼ NATï¼Œä½†æ˜¯é€šå¸¸æ¥è¯´å®¢æˆ·ç«¯å¼€è¾Ÿçš„ç«¯å£æ˜¯éšæœºçš„)</p></blockquote><h3 id="passive-mode" tabindex="-1"><a class="header-anchor" href="#passive-mode"><span>Passive Mode</span></a></h3><p>FTP çš„ <strong>è¢«åŠ¨æ¨¡å¼</strong>ã€‚å®¢æˆ·ç«¯ä¾æ—§é€šè¿‡ 21 ç«¯å£è¿æ¥åˆ°æœåŠ¡å™¨ï¼Œå‘é€ <code>PASV</code> å‘½ä»¤ã€‚æœåŠ¡å™¨åœ¨è‡ªèº«ä¸»æœºä¸Šéšæœºæ‰“å¼€ä¸€ä¸ª <strong>é«˜ç«¯ç«¯å£</strong> (å¤§äº 1024)ï¼Œå¹¶å‘Šè¯‰å®¢æˆ·ç«¯è¿™ä¸ªç«¯å£çš„ä½ç½®ã€‚å®¢æˆ·ç«¯è¿æ¥åˆ°è¿™ä¸ªæœåŠ¡å™¨é«˜ç«¯ç«¯å£å»ºç«‹æ•°æ®è¿æ¥ã€‚é«˜ç«¯ç«¯å£çš„èŒƒå›´å¯ä»¥åœ¨ FTP æœåŠ¡å™¨ä¸Šè¿›è¡Œé…ç½®ã€‚</p><hr><h2 id="deploy-install" tabindex="-1"><a class="header-anchor" href="#deploy-install"><span>Deploy &amp;&amp; Install</span></a></h2><p>è®°å½•æ˜¨å¤©éƒ¨ç½²ä¸€å° FTP æœåŠ¡å™¨çš„è¿‡ç¨‹ã€‚éœ€æ±‚æ˜¯æˆ‘çš„ä¸€å°å†…ç½‘ä¸»æœºä¸Šæ‹¥æœ‰å¤§é‡æ•°æ®éœ€è¦åˆ†äº«ç»™åˆ«äººï¼Œæ‰€ä»¥æƒ³è¦æ­å»ºä¸€å° FTP æœåŠ¡å™¨ï¼Œå¹¶ç»™å¯¹æ–¹å¼€æ”¾ä¸€ä¸ªè´¦æˆ·ã€‚å¯¹æ–¹èƒ½å¤Ÿç™»å½•åˆ°åŒ…å«æ•°æ®çš„æ–‡ä»¶å¤¹ä¸‹ï¼Œä½†ä¸å¸Œæœ›è¯¥è´¦æˆ·èƒ½è®¿é—®ä¸»æœºä¸Šçš„å…¶å®ƒæ•°æ®ã€‚å¦å¤–ï¼Œç”±äºä¸»æœºä½äºå†…ç½‘ä¸­ï¼Œè¿˜è¦é…ç½®å†…ç½‘ç©¿é€ã€‚</p><p>é€šè¿‡ APT å®‰è£… <em>vsftpd (very secure FTP daemon)</em>ï¼Œå®ƒæ˜¯ä¸€ä¸ªå®Œå…¨å…è´¹ã€å¼€æ”¾æºä»£ç çš„ FTP æœåŠ¡å™¨è½¯ä»¶ï¼Œè¿è¡Œåœ¨ UNIX ç±»æ“ä½œç³»ç»Ÿä¸Šã€‚å°å·§è½»å¿«ã€å®‰å…¨æ˜“ç”¨ã€‚</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> vsftpd</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-console line-numbers-mode" data-highlighter="prismjs" data-ext="console" data-title="console"><pre><code><span class="line">$ service vsftpd status</span>
<span class="line">â— vsftpd.service - vsftpd FTP server</span>
<span class="line">     Loaded: loaded (/lib/systemd/system/vsftpd.service; enabled; vendor preset: enabled)</span>
<span class="line">     Active: active (running) since Wed 2020-12-16 17:39:31 CST; 16h ago</span>
<span class="line">   Main PID: 4224 (vsftpd)</span>
<span class="line">      Tasks: 1 (limit: 38277)</span>
<span class="line">     Memory: 16.6M</span>
<span class="line">     CGroup: /system.slice/vsftpd.service</span>
<span class="line">             â””â”€4224 /usr/sbin/vsftpd /etc/vsftpd.conf</span>
<span class="line"></span>
<span class="line">12æœˆ 16 17:39:31 zjt-work-ubuntu-20 systemd[1]: Starting vsftpd FTP server...</span>
<span class="line">12æœˆ 16 17:39:31 zjt-work-ubuntu-20 systemd[1]: Started vsftpd FTP server.</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="configuration" tabindex="-1"><a class="header-anchor" href="#configuration"><span>Configuration</span></a></h2><h3 id="create-user" tabindex="-1"><a class="header-anchor" href="#create-user"><span>Create User</span></a></h3><p>åˆ›å»ºä¸€ä¸ªæ™®é€šç”¨æˆ·ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> adduser <span class="token punctuation">[</span>--home DIR<span class="token punctuation">]</span> <span class="token punctuation">[</span>--shell <span class="token environment constant">SHELL</span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>åˆ›å»ºå®Œæ¯•åï¼Œå¯ä»¥åœ¨ <code>passwd</code> æ–‡ä»¶æœ€åçœ‹åˆ°ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">cat</span> /etc/passwd</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>åˆ é™¤ç”¨æˆ·ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> <span class="token function">userdel</span> <span class="token punctuation">[</span><span class="token environment constant">USER</span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="white-list-black-list" tabindex="-1"><a class="header-anchor" href="#white-list-black-list"><span>White List / Black List</span></a></h3><p>ç¼–è¾‘ vsftpd çš„é…ç½®æ–‡ä»¶ <code>/etc/vsftpd.conf</code> è¿›è¡Œé…ç½®ã€‚</p><p>é¦–å…ˆå¯åŠ¨ vsftpd çš„ user list åŠŸèƒ½ï¼Œè¯¥ç”¨æˆ·åˆ—è¡¨å¯ä»¥ä½œä¸ºé»‘åå•æˆ–ç™½åå•ä½¿ç”¨ã€‚åœ¨å½“å‰åœºæ™¯ä¸‹ï¼Œæˆ‘è‚¯å®šæ˜¯éœ€è¦ä¸€ä¸ªç™½åå•ï¼Œå¹¶å°†æä¾›ç»™å¯¹æ–¹çš„è´¦æˆ·åŠ å…¥åœ¨è¿™ä¸ªç™½åå•ä¸­ï¼Œè¿™æ ·åªæœ‰æä¾›ç»™ä»–çš„è´¦æˆ·æ‰å¯ä»¥è®¿é—®æ–‡ä»¶ã€‚</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">userlist_enable=YES</span>
<span class="line">userlist_deny=NO</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>userlist_enable=YES</code> è¡¨ç¤ºå¯ç”¨ç”¨æˆ·åˆ—è¡¨æ–‡ä»¶ (é»˜è®¤åœ¨ <code>/etc/vsftpd.user_list</code>ï¼Œæ¯è¡Œä¸€ä¸ªè´¦æˆ·å)</li><li><code>userlist_deny=NO</code> è¡¨ç¤ºä¸æ‹’ç»åˆ—è¡¨ä¸­çš„è´¦æˆ· (å³ç™½åå•)</li></ul><p>è¿™æ ·ï¼Œé™¤äº†åå•ä¸­æŒ‡å®šçš„è´¦æˆ·å¤–ï¼Œæˆ‘çš„ä¸»æœºé»˜è®¤è´¦æˆ·è¢«æ‹’ç»ç™»å½•ï¼š</p><div class="language-console line-numbers-mode" data-highlighter="prismjs" data-ext="console" data-title="console"><pre><code><span class="line">$ ftp localhost</span>
<span class="line">Connected to localhost.</span>
<span class="line">220 (vsFTPd 3.0.3)</span>
<span class="line">Name (localhost:mrdrivingduck): mrdrivingduck</span>
<span class="line">530 Permission denied.</span>
<span class="line">Login failed.</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="chroot-jail" tabindex="-1"><a class="header-anchor" href="#chroot-jail"><span>Chroot Jail</span></a></h3><p>å°†ç”¨æˆ·ç™»å½•åçš„ root ç›®å½•é”å®šåœ¨ä¸€ä¸ªç‰¹å®šç›®å½•ä¸‹ï¼Œå½¢æˆä¸€ä¸ª <em>ç›‘ç‹±</em>ã€‚ç”¨æˆ·é€šè¿‡ <code>cd ..</code> å‘½ä»¤æ— æ³•é€ƒå‡ºè¿™ä¸ªç›‘ç‹±ï¼Œä»è€Œä¿è¯ç”¨æˆ·åªèƒ½è®¿é—®ç‰¹å®šçš„ç›®å½•ã€‚Linux çš„ <code>chroot</code> å‘½ä»¤èƒ½å¤Ÿåšåˆ°è¿™ä»¶äº‹ã€‚ç¼–è¾‘ <code>/etc/vsftpd.conf</code>ï¼š</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">chroot_local_user=NO</span>
<span class="line">chroot_list_enable=YES</span>
<span class="line">allow_writeable_chroot=NO</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>chroot_local_user</code> è¡¨ç¤ºä¸€ä¸ªå…¨å±€è®¾å®šï¼Œè®¾ç½®æ˜¯å¦å°†æ‰€æœ‰ç”¨æˆ·é”å®šåœ¨ jail å†…</li><li><code>chroot_list_enable</code> è¡¨ç¤ºæ˜¯å¦å¯ç”¨é’ˆå¯¹ç‰¹å®šç”¨æˆ·çš„ <strong>ä¾‹å¤–</strong> è®¾å®šï¼Œå³é»‘åå•æˆ–ç™½åå•ï¼Œå–å†³äº <code>chroot_local_user</code> çš„è®¾å®š - åå•æ–‡ä»¶é»˜è®¤ä½äº <code>/etc/vsftpd.chroot_list</code></li><li><code>allow_writeable_chroot</code> - æ˜¯å¦å…è®¸ç”¨æˆ·ç™»å½•åè¢« chroot é”å®šçš„è·¯å¾„å¯å†™ (æ˜¯ä¸€ä¸ªå®‰å…¨ç­–ç•¥)</li></ul><blockquote><p>å¦‚æœå°† <code>allow_writeable_chroot</code> è®¾ç½®ä¸º <code>NO</code>ï¼Œå¯èƒ½ä¼šé‡åˆ° <code>500 OOPS: vsftpd: refusing to run with writable root inside chroot ()</code> çš„é”™è¯¯ã€‚æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>å°† <code>allow_writeable_chroot</code> è®¾ç½®ä¸º <code>YES</code> å¯ä»¥ç›´æ¥ç»•å¼€å®‰å…¨æ£€æŸ¥ï¼Œå…å»äº†å¾ˆå¤šä¸å¿…è¦çš„éº»çƒ¦ï¼Œä½†æ˜¯å¯èƒ½ä¼šå¸¦æ¥ <strong>å®‰å…¨é—®é¢˜</strong> (<a href="https://serverfault.com/questions/743949/vsftp-why-is-allow-writeable-chroot-yes-a-bad-idea" target="_blank" rel="noopener noreferrer">ROARING BEAST ATTACK</a>)ã€‚</p><p>å¦ä¸€ç§æ–¹æ³•æ˜¯è®©ç”¨æˆ·è¢«é”å®šåˆ°çš„è·¯å¾„ <strong>ä¸å¯å†™</strong>ï¼Œä½†æ˜¯å¦‚æœéœ€è¦è·¯å¾„èƒ½å¤Ÿè¢«æµè§ˆï¼Œé‚£ä¹ˆå°±è¦ä¿ç•™è·¯å¾„çš„ <strong>å¯è¯»</strong> å’Œ <strong>å¯æ‰§è¡Œ</strong> æƒé™ã€‚å› æ­¤ï¼Œè¿™ç§æ–¹æ³•å®é™…ä¸Šæ˜¯æœ€å®‰å…¨çš„ã€‚</p><p>æˆ‘æœ¬ä»¥ä¸ºå°†å¼€æ”¾è´¦æˆ·çš„ root è·¯å¾„ä¸‹çš„æ–‡ä»¶å¤¹æƒé™è®¾ç½®ä¸€ä¸‹å°±è¡Œäº†ã€‚æ²¡æƒ³åˆ°ï¼Œç”±äºæˆ‘å­˜æ”¾æ•°æ®çš„ NTFS æ–‡ä»¶ç³»ç»Ÿä½äºä¸€ä¸ªç§»åŠ¨ç¡¬ç›˜ä¸Šï¼Œä½¿ç”¨ <code>chmod</code> å±…ç„¶æ— æ³•æ›´æ”¹ç›®å½•æƒé™ ğŸ˜¥ã€‚å‚è€ƒ <a href="http://blog.itpub.net/31536365/viewspace-2154308/" target="_blank" rel="noopener noreferrer">è¿™ä¸ªè§£å†³æ–¹æ¡ˆ</a> åï¼Œæˆ‘åªèƒ½åˆ° <code>/etc/fstab</code> ä¸­æ‰‹åŠ¨è®¾ç½®ï¼š</p><ul><li>é€šè¿‡ <code>sudo fdisk -l</code> æŸ¥è¯¢è¿™ä¸ªç¡¬ç›˜çš„ UUID</li><li>é€šè¿‡ <code>cat /etc/passwd</code> æŸ¥è¯¢å½“å‰ä¸»æœºç”¨æˆ·çš„ uidã€gid</li><li>åœ¨ <code>/etc/fstab</code> ä¸­è®¾ç½®ç¡¬ç›˜æŒ‚è½½ç‚¹ã€è®¾ç½®ç›®å½•æ‹¥æœ‰è€…ä¸ºä¸»æœºç”¨æˆ·ã€ä¸»æœºç”¨æˆ·æ‹¥æœ‰ <code>7</code> æƒé™ã€å…¶å®ƒç”¨æˆ·åªæœ‰ <code>5</code> æƒé™ã€‚</li></ul><p>è¿™æ ·ï¼Œå¼€æ”¾è´¦æˆ·ç™»å½•åˆ°è¯¥è·¯å¾„åï¼Œå°†ä¸å…·æœ‰å†™æƒé™ï¼›è€Œæˆ‘çš„ä¸»æœºç”¨æˆ·å¯ä»¥ç»§ç»­å‘ç¡¬ç›˜ä¸­å†™å…¥æ•°æ®ã€‚</p></blockquote><h3 id="passive-mode-frp" tabindex="-1"><a class="header-anchor" href="#passive-mode-frp"><span>Passive Mode &amp;&amp; frp</span></a></h3><p>ç”±äº FTP å®¢æˆ·ç«¯ä¹Ÿåœ¨å†…ç½‘ä¸­ï¼Œæ˜¾ç„¶ï¼ŒFTP æœåŠ¡å™¨æ— æ³•ä½¿ç”¨ä¸»åŠ¨æ¨¡å¼ï¼Œé‚£ä¹ˆéœ€è¦æ˜¾å¼å°† vsftpd é…ç½®ä¸º <strong>è¢«åŠ¨æ¨¡å¼</strong>ã€‚æ­¤å¤–ï¼Œè¿˜é‡åˆ°äº†ä¸€äº›é”™è¯¯ï¼Œé€šè¿‡å‚è€ƒ <a href="https://blog.csdn.net/zengd0/article/details/109403079" target="_blank" rel="noopener noreferrer">è¿™ç¯‡æ–‡ç« </a>ï¼Œè¿˜è¦åŠ ä¸€äº›é¢å¤–é…ç½®ã€‚åœ¨ <code>/etc/vsftpd.conf</code> ä¸­ï¼š</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">pasv_enable=YES</span>
<span class="line">pasv_promiscuous=YES</span>
<span class="line">pasv_address=118.31.10.213</span>
<span class="line">pasv_addr_resolve=YES</span>
<span class="line">listen_ipv6=NO</span>
<span class="line">listen=YES</span>
<span class="line">pasv_min_port=12792</span>
<span class="line">pasv_max_port=12793</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶ä¸­ï¼Œ<code>pasv_address</code> æ˜¯ frp æœåŠ¡å™¨çš„è¿è¡Œåœ°å€ï¼Œæ˜¯å¿…é¡»çš„ï¼›<code>pasv_min_port</code> å’Œ <code>pasv_max_port</code> ç¡®å®šäº† FTP æœåŠ¡å™¨ä¸Šæ‰“å¼€æ•°æ®ç«¯å£çš„èŒƒå›´ï¼Œè¿™äº›ç«¯å£éœ€è¦è¢«ç©¿é€åˆ° frp æœåŠ¡å™¨çš„ç›¸åŒç«¯å£ä¸Šã€‚æ‰€ä»¥æ•´ä½“çš„ frp ç«¯å£ç©¿é€æ–¹æ¡ˆå¦‚ä¸‹ (åŒ…æ‹¬æ§åˆ¶ç«¯å£ 21)ï¼š</p><div class="language-ini line-numbers-mode" data-highlighter="prismjs" data-ext="ini" data-title="ini"><pre><code><span class="line"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">ftp</span><span class="token punctuation">]</span></span></span>
<span class="line"><span class="token key attr-name">type</span> <span class="token punctuation">=</span> <span class="token value attr-value">tcp</span></span>
<span class="line"><span class="token key attr-name">local_ip</span> <span class="token punctuation">=</span> <span class="token value attr-value">127.0.0.1</span></span>
<span class="line"><span class="token key attr-name">local_port</span> <span class="token punctuation">=</span> <span class="token value attr-value">21</span></span>
<span class="line"><span class="token key attr-name">remote_port</span> <span class="token punctuation">=</span> <span class="token value attr-value">2121</span></span>
<span class="line"></span>
<span class="line"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">frp-pasv-1</span><span class="token punctuation">]</span></span></span>
<span class="line"><span class="token key attr-name">type</span> <span class="token punctuation">=</span> <span class="token value attr-value">tcp</span></span>
<span class="line"><span class="token key attr-name">local_ip</span> <span class="token punctuation">=</span> <span class="token value attr-value">127.0.0.1</span></span>
<span class="line"><span class="token key attr-name">local_port</span> <span class="token punctuation">=</span> <span class="token value attr-value">12792</span></span>
<span class="line"><span class="token key attr-name">remote_port</span> <span class="token punctuation">=</span> <span class="token value attr-value">12792</span></span>
<span class="line"></span>
<span class="line"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">frp-pasv-2</span><span class="token punctuation">]</span></span></span>
<span class="line"><span class="token key attr-name">type</span> <span class="token punctuation">=</span> <span class="token value attr-value">tcp</span></span>
<span class="line"><span class="token key attr-name">local_ip</span> <span class="token punctuation">=</span> <span class="token value attr-value">127.0.0.1</span></span>
<span class="line"><span class="token key attr-name">local_port</span> <span class="token punctuation">=</span> <span class="token value attr-value">12793</span></span>
<span class="line"><span class="token key attr-name">remote_port</span> <span class="token punctuation">=</span> <span class="token value attr-value">12793</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>FTP å®¢æˆ·ç«¯åº”å½“ä»¥è¢«åŠ¨æ¨¡å¼è¿æ¥ frp æœåŠ¡å™¨çš„ <code>2121</code> (FTP æœåŠ¡å™¨æ§åˆ¶ç«¯å£çš„è¿œç¨‹ç«¯å£)ã€‚æ³¨æ„ï¼Œfrp çš„æ‰€æœ‰è¿œç¨‹ç«¯å£éƒ½åº”å½“åœ¨äº‘æœåŠ¡å™¨çš„å®‰å…¨ç»„ç™½åå•å†…ã€‚</p><h3 id="others" tabindex="-1"><a class="header-anchor" href="#others"><span>Others</span></a></h3><p>Ubuntu 20.04 ä¸Šè¿˜å¯èƒ½åœ¨ vsftpd æœåŠ¡çš„æ—¥å¿—ä¸­çœ‹åˆ°é”™è¯¯ï¼Œè§£å†³æ–¹æ¡ˆ <a href="https://askubuntu.com/questions/1239503/ubuntu-20-04-and-20-10-etc-securetty-no-such-file-or-directory" target="_blank" rel="noopener noreferrer">åœ¨æ­¤</a>ã€‚</p><hr><h2 id="summary" tabindex="-1"><a class="header-anchor" href="#summary"><span>Summary</span></a></h2><p>è¿™ç­‰æŠ˜è…¾ï¼Œvery interesting ğŸ˜„</p><h2 id="references" tabindex="-1"><a class="header-anchor" href="#references"><span>References</span></a></h2><p><a href="https://blog.csdn.net/feit2417/article/details/82903314" target="_blank" rel="noopener noreferrer">CSDN - vsftpd -- ç”¨æˆ·åå•æ–‡ä»¶ ftpusers å’Œ user_list</a></p><p><a href="https://blog.csdn.net/gybshen/article/details/79782884" target="_blank" rel="noopener noreferrer">CSDN - vsftpd é…ç½®: chroot_local_user ä¸ chroot_list_enable è¯¦è§£</a></p><p><a href="https://wiki.archlinux.org/index.php/Very_Secure_FTP_Daemon_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)" target="_blank" rel="noopener noreferrer">Arch Linux - Very Secure FTP Daemon (ç®€ä½“ä¸­æ–‡)</a></p><p><a href="https://www.benscobie.com/fixing-500-oops-vsftpd-refusing-to-run-with-writable-root-inside-chroot/" target="_blank" rel="noopener noreferrer">Ben Scobie - Fixing 500 OOPS: vsftpd: refusing to run with writable root inside chroot ()</a></p>`,58)]))}const o=s(t,[["render",i],["__file","Network FTP.html.vue"]]),c=JSON.parse('{"path":"/notes/Network/Network%20FTP.html","title":"Network - FTP","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"About","slug":"about","link":"#about","children":[]},{"level":2,"title":"Working Mode","slug":"working-mode","link":"#working-mode","children":[{"level":3,"title":"Port Mode","slug":"port-mode","link":"#port-mode","children":[]},{"level":3,"title":"Passive Mode","slug":"passive-mode","link":"#passive-mode","children":[]}]},{"level":2,"title":"Deploy && Install","slug":"deploy-install","link":"#deploy-install","children":[]},{"level":2,"title":"Configuration","slug":"configuration","link":"#configuration","children":[{"level":3,"title":"Create User","slug":"create-user","link":"#create-user","children":[]},{"level":3,"title":"White List / Black List","slug":"white-list-black-list","link":"#white-list-black-list","children":[]},{"level":3,"title":"Chroot Jail","slug":"chroot-jail","link":"#chroot-jail","children":[]},{"level":3,"title":"Passive Mode && frp","slug":"passive-mode-frp","link":"#passive-mode-frp","children":[]},{"level":3,"title":"Others","slug":"others","link":"#others","children":[]}]},{"level":2,"title":"Summary","slug":"summary","link":"#summary","children":[]},{"level":2,"title":"References","slug":"references","link":"#references","children":[]}],"git":{},"filePathRelative":"notes/Network/Network FTP.md"}');export{o as comp,c as data};
