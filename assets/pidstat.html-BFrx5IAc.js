import{_ as n,c as a,a as e,o as p}from"./app-7eKjwDat.js";const t={};function l(c,s){return p(),a("div",null,s[0]||(s[0]=[e(`<h1 id="pidstat" tabindex="-1"><a class="header-anchor" href="#pidstat"><span>pidstat</span></a></h1><p>Created by : Mr Dk.</p><p>2023 / 08 / 14 00:23</p><p>Hangzhou, Zhejiang, China</p><hr><h2 id="background" tabindex="-1"><a class="header-anchor" href="#background"><span>Background</span></a></h2><p><code>pidstat</code> 用于打印 Linux 任务（进程/线程）的统计信息。</p><h2 id="usage" tabindex="-1"><a class="header-anchor" href="#usage"><span>Usage</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">$ pidstat <span class="token parameter variable">--help</span></span>
<span class="line">Usage: pidstat <span class="token punctuation">[</span> options <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token operator">&lt;</span>interval<span class="token operator">&gt;</span> <span class="token punctuation">[</span> <span class="token operator">&lt;</span>count<span class="token operator">&gt;</span> <span class="token punctuation">]</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token operator">&lt;</span>program<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>args<span class="token operator">&gt;</span> <span class="token punctuation">]</span></span>
<span class="line">Options are:</span>
<span class="line"><span class="token punctuation">[</span> <span class="token parameter variable">-d</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-H</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-h</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-I</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-l</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-R</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-r</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-s</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-t</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-U</span> <span class="token punctuation">[</span> <span class="token operator">&lt;</span>username<span class="token operator">&gt;</span> <span class="token punctuation">]</span> <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">[</span> <span class="token parameter variable">-u</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-V</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-v</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-w</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-C</span> <span class="token operator">&lt;</span>command<span class="token operator">&gt;</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-G</span> <span class="token operator">&lt;</span>process_name<span class="token operator">&gt;</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">--human</span> <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">[</span> <span class="token parameter variable">-p</span> <span class="token punctuation">{</span> <span class="token operator">&lt;</span>pid<span class="token operator">&gt;</span> <span class="token punctuation">[</span>,<span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token operator">|</span> SELF <span class="token operator">|</span> ALL <span class="token punctuation">}</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-T</span> <span class="token punctuation">{</span> TASK <span class="token operator">|</span> CHILD <span class="token operator">|</span> ALL <span class="token punctuation">}</span> <span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="filter" tabindex="-1"><a class="header-anchor" href="#filter"><span>Filter</span></a></h3><p>使用 <code>-c</code> 参数按命令名称过滤：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">$ pidstat <span class="token parameter variable">-C</span> postgres</span>
<span class="line">Linux <span class="token number">5.10</span>.134-007.ali5000.al8.x86_64 <span class="token punctuation">(</span>k39a07236.sqa.eu95<span class="token punctuation">)</span>      08/14/2023      _x86_64_        <span class="token punctuation">(</span><span class="token number">104</span> CPU<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token number">12</span>:02:25 AM   <span class="token environment constant">UID</span>       PID    %usr %system  %guest   %wait    %CPU   CPU  Command</span>
<span class="line"><span class="token number">12</span>:02:25 AM  <span class="token number">1000</span>    <span class="token number">513728</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">58</span>  postgres</span>
<span class="line"><span class="token number">12</span>:02:25 AM  <span class="token number">1000</span>   <span class="token number">1000582</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">44</span>  postgres</span>
<span class="line"><span class="token number">12</span>:02:25 AM  <span class="token number">1000</span>   <span class="token number">1000587</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">89</span>  postgres</span>
<span class="line"><span class="token number">12</span>:02:25 AM  <span class="token number">1000</span>   <span class="token number">1000590</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">79</span>  postgres</span>
<span class="line"><span class="token number">12</span>:02:25 AM  <span class="token number">1000</span>   <span class="token number">1000591</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">25</span>  postgres</span>
<span class="line"><span class="token number">12</span>:02:25 AM  <span class="token number">1000</span>   <span class="token number">1000593</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">36</span>  postgres</span>
<span class="line"><span class="token number">12</span>:02:25 AM  <span class="token number">1000</span>   <span class="token number">1000625</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">27</span>  postgres</span>
<span class="line"><span class="token number">12</span>:02:25 AM  <span class="token number">1000</span>   <span class="token number">1000627</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>   <span class="token number">103</span>  postgres</span>
<span class="line"><span class="token punctuation">..</span>.</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用 <code>-p</code> 参数按 pid 过滤：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">$ pidstat <span class="token parameter variable">-p</span> <span class="token number">513728</span></span>
<span class="line">Linux <span class="token number">5.10</span>.134-007.ali5000.al8.x86_64 <span class="token punctuation">(</span>k39a07236.sqa.eu95<span class="token punctuation">)</span>      08/14/2023      _x86_64_        <span class="token punctuation">(</span><span class="token number">104</span> CPU<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token number">12</span>:03:34 AM   <span class="token environment constant">UID</span>       PID    %usr %system  %guest   %wait    %CPU   CPU  Command</span>
<span class="line"><span class="token number">12</span>:03:34 AM  <span class="token number">1000</span>    <span class="token number">513728</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">58</span>  postgres</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="cpu-utilization" tabindex="-1"><a class="header-anchor" href="#cpu-utilization"><span>CPU Utilization</span></a></h3><p>使用 <code>-u</code> 参数将会打印 CPU 使用情况：</p><ul><li><code>%usr</code>：用户空间 CPU 使用量</li><li><code>%system</code>：内核空间 CPU 使用量</li><li><code>%guest</code>：虚拟机 CPU 使用量</li><li><code>%wait</code>：等待被执行的 CPU 使用量</li><li><code>%CPU</code>：CPU 总使用量</li><li><code>CPU</code>：执行该任务的 CPU 编号</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">$ pidstat <span class="token parameter variable">-p</span> <span class="token number">513728</span> <span class="token parameter variable">-u</span></span>
<span class="line">Linux <span class="token number">5.10</span>.134-007.ali5000.al8.x86_64 <span class="token punctuation">(</span>k39a07236.sqa.eu95<span class="token punctuation">)</span>      08/14/2023      _x86_64_        <span class="token punctuation">(</span><span class="token number">104</span> CPU<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token number">12</span>:13:28 AM   <span class="token environment constant">UID</span>       PID    %usr %system  %guest   %wait    %CPU   CPU  Command</span>
<span class="line"><span class="token number">12</span>:13:28 AM  <span class="token number">1000</span>    <span class="token number">513728</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">58</span>  postgres</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="context-switching" tabindex="-1"><a class="header-anchor" href="#context-switching"><span>Context Switching</span></a></h3><p>使用 <code>-w</code> 参数将会打印上下文切换信息：</p><ul><li><code>cswch/s</code>：每秒自愿发生的上下文切换次数（比如因等待资源而阻塞）</li><li><code>nvcswch/s</code>：每秒非自愿发生的上下文切换次数（比如时间片用完）</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">$ pidstat <span class="token parameter variable">-p</span> <span class="token number">513728</span> <span class="token parameter variable">-w</span></span>
<span class="line">Linux <span class="token number">5.10</span>.134-007.ali5000.al8.x86_64 <span class="token punctuation">(</span>k39a07236.sqa.eu95<span class="token punctuation">)</span>      08/14/2023      _x86_64_        <span class="token punctuation">(</span><span class="token number">104</span> CPU<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token number">12</span>:13:41 AM   <span class="token environment constant">UID</span>       PID   cswch/s nvcswch/s  Command</span>
<span class="line"><span class="token number">12</span>:13:41 AM  <span class="token number">1000</span>    <span class="token number">513728</span>      <span class="token number">0.00</span>      <span class="token number">0.00</span>  postgres</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="memory-utilization" tabindex="-1"><a class="header-anchor" href="#memory-utilization"><span>Memory Utilization</span></a></h3><p>使用 <code>-r</code> 参数将会打印缺页和内存使用信息：</p><ul><li><code>minflt/s</code>：每秒钟不需要从内存装载的缺页次数</li><li><code>majflt/s</code>：每秒钟需要从内存装载的缺页次数</li><li><code>VSZ</code>：虚拟内存 kB 数</li><li><code>RSS</code>：非 swap 的物理内存 kB 数</li><li><code>%MEM</code>：目前使用的物理内存占所有物理内存的比例</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">$ pidstat <span class="token parameter variable">-p</span> <span class="token number">513728</span> <span class="token parameter variable">-r</span></span>
<span class="line">Linux <span class="token number">5.10</span>.134-007.ali5000.al8.x86_64 <span class="token punctuation">(</span>k39a07236.sqa.eu95<span class="token punctuation">)</span>      08/14/2023      _x86_64_        <span class="token punctuation">(</span><span class="token number">104</span> CPU<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token number">12</span>:15:29 AM   <span class="token environment constant">UID</span>       PID  minflt/s  majflt/s     VSZ     RSS   %MEM  Command</span>
<span class="line"><span class="token number">12</span>:15:29 AM  <span class="token number">1000</span>    <span class="token number">513728</span>      <span class="token number">0.00</span>      <span class="token number">0.00</span> <span class="token number">2980112</span>      <span class="token number">80</span>   <span class="token number">0.00</span>  postgres</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="i-o-statistics" tabindex="-1"><a class="header-anchor" href="#i-o-statistics"><span>I/O Statistics</span></a></h3><p>使用 <code>-d</code> 参数将会打印 I/O 统计信息：</p><ul><li><code>kB_rd/s</code>：每秒从磁盘上读取的 kB 数</li><li><code>kB_wr/s</code>：每秒写入磁盘的 kB 数</li><li><code>iodelay</code>：等待 I/O 完成的时钟周期数</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">$ pidstat <span class="token parameter variable">-d</span></span>
<span class="line">Linux <span class="token number">5.10</span>.134-007.ali5000.al8.x86_64 <span class="token punctuation">(</span>k39a07236.sqa.eu95<span class="token punctuation">)</span>      08/14/2023      _x86_64_        <span class="token punctuation">(</span><span class="token number">104</span> CPU<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token number">12</span>:21:36 AM   <span class="token environment constant">UID</span>       PID   kB_rd/s   kB_wr/s kB_ccwr/s iodelay  Command</span>
<span class="line"><span class="token number">12</span>:21:36 AM     <span class="token number">0</span>         <span class="token number">1</span>     <span class="token parameter variable">-1.00</span>     <span class="token parameter variable">-1.00</span>     <span class="token parameter variable">-1.00</span>   <span class="token number">11739</span>  systemd</span>
<span class="line"><span class="token number">12</span>:21:36 AM     <span class="token number">0</span>       <span class="token number">778</span>     <span class="token parameter variable">-1.00</span>     <span class="token parameter variable">-1.00</span>     <span class="token parameter variable">-1.00</span>    <span class="token number">2611</span>  kswapd0</span>
<span class="line"><span class="token number">12</span>:21:36 AM     <span class="token number">0</span>       <span class="token number">779</span>     <span class="token parameter variable">-1.00</span>     <span class="token parameter variable">-1.00</span>     <span class="token parameter variable">-1.00</span>     <span class="token number">140</span>  kswapd1</span>
<span class="line"><span class="token punctuation">..</span>.</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="threads" tabindex="-1"><a class="header-anchor" href="#threads"><span>Threads</span></a></h3><p>使用 <code>-t</code> 参数可以打印一个进程内所有线程的信息：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token variable">$pidstat</span> <span class="token parameter variable">-p</span> <span class="token number">399853</span> <span class="token parameter variable">-t</span></span>
<span class="line">Linux <span class="token number">5.10</span>.134-007.ali5000.al8.x86_64 <span class="token punctuation">(</span>3970e7e00014<span class="token punctuation">)</span>    08/13/2023      _x86_64_        <span class="token punctuation">(</span><span class="token number">104</span> CPU<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">04:26:16 PM   <span class="token environment constant">UID</span>      TGID       TID    %usr %system  %guest   %wait    %CPU   CPU  Command</span>
<span class="line">04:26:16 PM  <span class="token number">1000</span>    <span class="token number">399853</span>         -    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">20</span>  postgres</span>
<span class="line">04:26:16 PM  <span class="token number">1000</span>         -    <span class="token number">399853</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">20</span>  <span class="token operator">|</span>__postgres</span>
<span class="line">04:26:16 PM  <span class="token number">1000</span>         -    <span class="token number">399854</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>     <span class="token number">9</span>  <span class="token operator">|</span>__postgres</span>
<span class="line">04:26:16 PM  <span class="token number">1000</span>         -    <span class="token number">399855</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">17</span>  <span class="token operator">|</span>__pxadps399853</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="references" tabindex="-1"><a class="header-anchor" href="#references"><span>References</span></a></h2><p><a href="https://man7.org/linux/man-pages/man1/pidstat.1.html" target="_blank" rel="noopener noreferrer">pidstat(1) — Linux manual page</a></p><p><a href="https://www.geeksforgeeks.org/monitor-and-find-statistics-for-linux-procesess-using-pidstat-tool/" target="_blank" rel="noopener noreferrer">Monitor and Find Statistics for Linux Processes Using pidstat Tool</a></p>`,36)]))}const o=n(t,[["render",l],["__file","pidstat.html.vue"]]),r=JSON.parse('{"path":"/notes/Linux/pidstat.html","title":"pidstat","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"Background","slug":"background","link":"#background","children":[]},{"level":2,"title":"Usage","slug":"usage","link":"#usage","children":[{"level":3,"title":"Filter","slug":"filter","link":"#filter","children":[]},{"level":3,"title":"CPU Utilization","slug":"cpu-utilization","link":"#cpu-utilization","children":[]},{"level":3,"title":"Context Switching","slug":"context-switching","link":"#context-switching","children":[]},{"level":3,"title":"Memory Utilization","slug":"memory-utilization","link":"#memory-utilization","children":[]},{"level":3,"title":"I/O Statistics","slug":"i-o-statistics","link":"#i-o-statistics","children":[]},{"level":3,"title":"Threads","slug":"threads","link":"#threads","children":[]}]},{"level":2,"title":"References","slug":"references","link":"#references","children":[]}],"git":{},"filePathRelative":"notes/Linux/pidstat.md"}');export{o as comp,r as data};
