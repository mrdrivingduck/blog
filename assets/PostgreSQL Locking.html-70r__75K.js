import{_ as n,c as a,a as e,o as p}from"./app-BeHGwf2X.js";const c="/blog/assets/postgres-table-level-locks-CLYYCOlJ.png",l="/blog/assets/postgres-row-level-locks-2k_na-WR.png",o={};function t(i,s){return p(),a("div",null,s[0]||(s[0]=[e(`<h1 id="postgresql-locking" tabindex="-1"><a class="header-anchor" href="#postgresql-locking"><span>PostgreSQL - Locking</span></a></h1><p>Created by : Mr Dk.</p><p>2021 / 05 / 30 21:45</p><p>Hangzhou, Zhejiang, China</p><hr><h2 id="about" tabindex="-1"><a class="header-anchor" href="#about"><span>About</span></a></h2><p>PostgreSQL ä¸­ä½¿ç”¨å„ç§å„æ ·çš„ <strong>é”</strong> å¯¹è¡¨çš„å¹¶å‘è®¿é—®è¿›è¡Œæ§åˆ¶ã€‚å¤§éƒ¨åˆ†çš„ PG å‘½ä»¤éƒ½ä¼šè‡ªåŠ¨è·å–åˆé€‚çš„é”ï¼Œä»¥é˜²æ­¢å‘½ä»¤æ‰§è¡ŒæœŸé—´è¡¨è¢«åˆ é™¤æˆ–ä¿®æ”¹ã€‚</p><h2 id="table-level-locks" tabindex="-1"><a class="header-anchor" href="#table-level-locks"><span>Table-level Locks</span></a></h2><p>æ‰€æœ‰çš„ <strong>è¡¨çº§é”</strong>ã€‚è·å–æ–¹å¼ï¼š</p><ul><li>æ‰§è¡ŒæŸäº›ç‰¹å®šçš„ SQL å‘½ä»¤ï¼Œä¼šè‡ªåŠ¨è·å–ç›¸åº”çš„è¡¨çº§é”</li><li>ä½¿ç”¨ <code>LOCK</code> å‘½ä»¤æ˜¾å¼è·å–è¡¨çº§é”</li></ul><blockquote><p>è™½ç„¶è¿™äº›é”é‡Œæœ‰äº›åå­—ä¸­å¸¦æœ‰ <em>row</em>ï¼Œä½†æ˜¯å®é™…ä¸Šéƒ½æ˜¯è¡¨çº§é”ã€‚è¿™æ˜¯å‘½åä¸Šçš„å†å²é—ç•™é—®é¢˜ã€‚</p></blockquote><p>é”ä¹‹é—´å®é™…å·®åˆ«æ˜¯ï¼Œç›¸äº’ä¹‹é—´æ˜¯å¦å†²çªï¼š</p><ul><li>ä¸¤ä¸ªäº‹åŠ¡ä¸èƒ½åœ¨åŒä¸€æ—¶é—´è·å–åŒä¸€ä¸ªè¡¨ä¸Šç›¸äº’å†²çªçš„é”</li><li>åŒä¸€ä¸ªäº‹åŠ¡ä¸ä¸è‡ªå·±å†²çª</li><li>æœ‰ä¸€äº›é”æ˜¯è‡ªå†²çªçš„ï¼Œåªèƒ½è¢«ä¸€ä¸ªäº‹åŠ¡æŒæœ‰</li></ul><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c" data-title="c"><pre><code><span class="line"><span class="token comment">/* NoLock is not a lock mode, but a flag value meaning &quot;don&#39;t get a lock&quot; */</span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NoLock</span>                  <span class="token expression"><span class="token number">0</span></span></span></span>
<span class="line"></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">AccessShareLock</span>         <span class="token expression"><span class="token number">1</span>   </span><span class="token comment">/* SELECT */</span></span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">RowShareLock</span>            <span class="token expression"><span class="token number">2</span>   </span><span class="token comment">/* SELECT FOR UPDATE/FOR SHARE */</span></span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">RowExclusiveLock</span>        <span class="token expression"><span class="token number">3</span>   </span><span class="token comment">/* INSERT, UPDATE, DELETE */</span></span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">ShareUpdateExclusiveLock</span> <span class="token expression"><span class="token number">4</span>  </span><span class="token comment">/* VACUUM (non-FULL),ANALYZE, CREATE INDEX</span>
<span class="line">                                     * CONCURRENTLY */</span></span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">ShareLock</span>               <span class="token expression"><span class="token number">5</span>   </span><span class="token comment">/* CREATE INDEX (WITHOUT CONCURRENTLY) */</span></span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">ShareRowExclusiveLock</span>   <span class="token expression"><span class="token number">6</span>   </span><span class="token comment">/* like EXCLUSIVE MODE, but allows ROW</span>
<span class="line">                                     * SHARE */</span></span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">ExclusiveLock</span>           <span class="token expression"><span class="token number">7</span>   </span><span class="token comment">/* blocks ROW SHARE/SELECT...FOR UPDATE */</span></span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">AccessExclusiveLock</span>     <span class="token expression"><span class="token number">8</span>   </span><span class="token comment">/* ALTER TABLE, DROP TABLE, VACUUM FULL,</span>
<span class="line">                                     * and unqualified LOCK TABLE */</span></span></span>
<span class="line"></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MaxLockMode</span>             <span class="token expression"><span class="token number">8</span></span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨æºä»£ç ä¸­ï¼Œå®šä¹‰äº†ä»¥ä¸Šé”ç±»å‹ï¼Œä»¥åŠé”çš„ä½¿ç”¨åœºæ™¯ã€‚é”å…¼å®¹æ€§å®šä¹‰å¦‚ä¸‹ã€‚é€šè¿‡å¯¹è¯¥æ•°ç»„ä¸é”è¯·æ±‚è¿›è¡Œä¸è¿ç®—ï¼Œå°±å¯ä»¥å¾—çŸ¥æ˜¯å¦å‘ç”Ÿé”å†²çªã€‚</p><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c" data-title="c"><pre><code><span class="line"><span class="token comment">/*</span>
<span class="line"> * Data structures defining the semantics of the standard lock methods.</span>
<span class="line"> *</span>
<span class="line"> * The conflict table defines the semantics of the various lock modes.</span>
<span class="line"> */</span></span>
<span class="line"><span class="token keyword">static</span> <span class="token keyword">const</span> LOCKMASK LockConflicts<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">/* AccessShareLock */</span></span>
<span class="line">    <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>AccessExclusiveLock<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">/* RowShareLock */</span></span>
<span class="line">    <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>ExclusiveLock<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>AccessExclusiveLock<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">/* RowExclusiveLock */</span></span>
<span class="line">    <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>ShareLock<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>ShareRowExclusiveLock<span class="token punctuation">)</span> <span class="token operator">|</span></span>
<span class="line">    <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>ExclusiveLock<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>AccessExclusiveLock<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">/* ShareUpdateExclusiveLock */</span></span>
<span class="line">    <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>ShareUpdateExclusiveLock<span class="token punctuation">)</span> <span class="token operator">|</span></span>
<span class="line">    <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>ShareLock<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>ShareRowExclusiveLock<span class="token punctuation">)</span> <span class="token operator">|</span></span>
<span class="line">    <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>ExclusiveLock<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>AccessExclusiveLock<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">/* ShareLock */</span></span>
<span class="line">    <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>RowExclusiveLock<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>ShareUpdateExclusiveLock<span class="token punctuation">)</span> <span class="token operator">|</span></span>
<span class="line">    <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>ShareRowExclusiveLock<span class="token punctuation">)</span> <span class="token operator">|</span></span>
<span class="line">    <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>ExclusiveLock<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>AccessExclusiveLock<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">/* ShareRowExclusiveLock */</span></span>
<span class="line">    <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>RowExclusiveLock<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>ShareUpdateExclusiveLock<span class="token punctuation">)</span> <span class="token operator">|</span></span>
<span class="line">    <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>ShareLock<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>ShareRowExclusiveLock<span class="token punctuation">)</span> <span class="token operator">|</span></span>
<span class="line">    <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>ExclusiveLock<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>AccessExclusiveLock<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">/* ExclusiveLock */</span></span>
<span class="line">    <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>RowShareLock<span class="token punctuation">)</span> <span class="token operator">|</span></span>
<span class="line">    <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>RowExclusiveLock<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>ShareUpdateExclusiveLock<span class="token punctuation">)</span> <span class="token operator">|</span></span>
<span class="line">    <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>ShareLock<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>ShareRowExclusiveLock<span class="token punctuation">)</span> <span class="token operator">|</span></span>
<span class="line">    <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>ExclusiveLock<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>AccessExclusiveLock<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">/* AccessExclusiveLock */</span></span>
<span class="line">    <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>AccessShareLock<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>RowShareLock<span class="token punctuation">)</span> <span class="token operator">|</span></span>
<span class="line">    <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>RowExclusiveLock<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>ShareUpdateExclusiveLock<span class="token punctuation">)</span> <span class="token operator">|</span></span>
<span class="line">    <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>ShareLock<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>ShareRowExclusiveLock<span class="token punctuation">)</span> <span class="token operator">|</span></span>
<span class="line">    <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>ExclusiveLock<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token function">LOCKBIT_ON</span><span class="token punctuation">(</span>AccessExclusiveLock<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+c+`" alt="postgres-table-level-locks"></p><p>å…³äºè¿™äº›é”åˆ†ç±»çš„æ¸Šæºï¼Œ<a href="https://www.modb.pro/db/26462" target="_blank" rel="noopener noreferrer">è¿™ç¯‡æ–‡ç« </a> åˆ†æå¾—æ¯”è¾ƒé€å½»ã€‚é”æ¨¡å‹çš„å‘å±•ç»è¿‡äº†ä»¥ä¸‹å‡ ä¸ªé˜¶æ®µï¼š</p><ol><li>ç»å…¸çš„è¯»é” / å†™é”æ¨¡å‹</li><li>å¼•å…¥ MVCC åçš„è¯»é” / å†™é”æ¨¡å‹</li><li>å¼•å…¥è¡Œçº§é”åçš„æ„å‘é”æ¨¡å‹</li><li>å¼•å…¥è‡ªæ–¥é”ä¹‹åçš„æœ€ç»ˆé”æ¨¡å‹</li></ol><p>åœºæ™¯æœ‰äº›å¤æ‚ï¼Œä»¥åå†é€ä¸ªææ¸…æ¥š ğŸ˜‘ã€‚</p><h2 id="row-level-locks" tabindex="-1"><a class="header-anchor" href="#row-level-locks"><span>Row-level Locks</span></a></h2><p>åŒä¸€ä¸ªäº‹åŠ¡å¯ä»¥æŒæœ‰åœ¨åŒä¸€è¡Œä¸Šç›¸äº’å†²çªçš„è¡Œçº§é”ï¼Œç”šè‡³æ˜¯ä¸åŒçš„å­äº‹åŠ¡ä¸­ï¼›ä½†ä¸¤ä¸ªäº‹åŠ¡ä¸èƒ½è·å–åŒä¸€è¡Œä¸Šç›¸å†²çªçš„é”ã€‚è¡Œçº§é”ä¸å½±å“æŸ¥è¯¢ï¼Œåªä¼šé˜»å¡åŒä¸€è¡Œçš„ writer å’Œ lockerã€‚</p><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c" data-title="c"><pre><code><span class="line"><span class="token comment">/*</span>
<span class="line"> * Possible lock modes for a tuple.</span>
<span class="line"> */</span></span>
<span class="line"><span class="token keyword">typedef</span> <span class="token keyword">enum</span> <span class="token class-name">LockTupleMode</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">/* SELECT FOR KEY SHARE */</span></span>
<span class="line">    LockTupleKeyShare<span class="token punctuation">,</span></span>
<span class="line">    <span class="token comment">/* SELECT FOR SHARE */</span></span>
<span class="line">    LockTupleShare<span class="token punctuation">,</span></span>
<span class="line">    <span class="token comment">/* SELECT FOR NO KEY UPDATE, and UPDATEs that don&#39;t modify key columns */</span></span>
<span class="line">    LockTupleNoKeyExclusive<span class="token punctuation">,</span></span>
<span class="line">    <span class="token comment">/* SELECT FOR UPDATE, UPDATEs that modify key columns, and DELETE */</span></span>
<span class="line">    LockTupleExclusive</span>
<span class="line"><span class="token punctuation">}</span> LockTupleMode<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+l+`" alt="postgres-row-level-locks"></p><h2 id="page-level-locks" tabindex="-1"><a class="header-anchor" href="#page-level-locks"><span>Page-level Locks</span></a></h2><p>é¡µçº§åˆ«çš„ share / exclusive é”ç”¨äºæ§åˆ¶å…±äº«ç¼“å†²æ± ä¸­çš„é¡µé¢è¯»å†™ã€‚åœ¨ fetch æˆ– update ä¸€è¡Œåï¼Œé”å°†ä¼šç«‹åˆ»é‡Šæ”¾ã€‚åº”ç”¨å¼€å‘äººå‘˜æ— éœ€å…³å¿ƒã€‚</p><h2 id="selecting-for-share-and-update" tabindex="-1"><a class="header-anchor" href="#selecting-for-share-and-update"><span>Selecting for Share and Update</span></a></h2><p>ä¸Šè¿°å„çº§åˆ«çš„é”ä¸­ï¼Œå¾ˆå¤šéƒ½æ˜¯ä¸ºäº†æœåŠ¡äº <code>select for update / share</code>ã€‚è¿™æ˜¯å¹²å•¥ç”¨çš„ï¼Ÿ</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">FOR</span> <span class="token keyword">UPDATE</span> <span class="token punctuation">[</span> <span class="token keyword">OF</span> table_name <span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> NOWAIT <span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">FOR</span> <span class="token keyword">SHARE</span> <span class="token punctuation">[</span> <span class="token keyword">OF</span> table_name <span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> NOWAIT <span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æ ¹æ®å®˜æ–¹æ–‡æ¡£ï¼Œå…¶ä½œç”¨ä¸ºï¼Œä½¿ SELECT è¯­å¥ä¸­è·å–åˆ°çš„æ‰€æœ‰ <strong>è¡Œ</strong> è¢«ä¸Šé”ï¼Œä»¥é˜²æ­¢å…¶å®ƒäº‹åŠ¡ä¸­çš„ UPDATE / DELETEã€‚</p><ul><li><code>SELECT FOR UPDATE</code> ä¸å…è®¸å…¶å®ƒäº‹åŠ¡çš„ <code>SELECT FOR UPDATE</code></li><li><code>SELECT FOR SHARE</code> å…è®¸å…¶å®ƒäº‹åŠ¡çš„ <code>SELECT FOR SHARE</code></li></ul><p>å¦‚æœé”å†²çªï¼Œå°†ä¼šä½¿å¦ä¸€ä¸ªäº‹åŠ¡çš„æ“ä½œè¯·æ±‚é˜»å¡ã€‚å› æ­¤å¯ä»¥æŒ‡å®š <code>NOWAIT</code> æ¥å†³å®šé”å†²çªæ—¶æ˜¯ç­‰å¾…è¿˜æ˜¯æŠ¥é”™ã€‚</p><h2 id="references" tabindex="-1"><a class="header-anchor" href="#references"><span>References</span></a></h2><p><a href="https://www.postgresql.org/docs/11/explicit-locking.html" target="_blank" rel="noopener noreferrer">PostgreSQL Documentation 11 - 13.3. Explicit Locking</a></p><p><a href="https://www.postgresql.org/docs/11/view-pg-locks.html" target="_blank" rel="noopener noreferrer">PostgreSQL Documentation 11 - 52.73. pg_locks</a></p><p><a href="https://www.postgresql.org/docs/11/sql-lock.html" target="_blank" rel="noopener noreferrer">PostgreSQL Documentation 11 - LOCK</a></p>`,37)]))}const r=n(o,[["render",t],["__file","PostgreSQL Locking.html.vue"]]),k=JSON.parse('{"path":"/notes/PostgreSQL/PostgreSQL%20Locking.html","title":"PostgreSQL - Locking","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"About","slug":"about","link":"#about","children":[]},{"level":2,"title":"Table-level Locks","slug":"table-level-locks","link":"#table-level-locks","children":[]},{"level":2,"title":"Row-level Locks","slug":"row-level-locks","link":"#row-level-locks","children":[]},{"level":2,"title":"Page-level Locks","slug":"page-level-locks","link":"#page-level-locks","children":[]},{"level":2,"title":"Selecting for Share and Update","slug":"selecting-for-share-and-update","link":"#selecting-for-share-and-update","children":[]},{"level":2,"title":"References","slug":"references","link":"#references","children":[]}],"git":{},"filePathRelative":"notes/PostgreSQL/PostgreSQL Locking.md"}');export{r as comp,k as data};
