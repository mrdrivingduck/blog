import{_ as a,c as s,a as e,o as t}from"./app-BeHGwf2X.js";const p={};function i(c,n){return t(),s("div",null,n[0]||(n[0]=[e(`<h1 id="linux-performance-perf-event" tabindex="-1"><a class="header-anchor" href="#linux-performance-perf-event"><span>Linux Performance - Perf Event</span></a></h1><p>Created by: Mr Dk.</p><p>2023 / 09 / 18 12:55 ğŸ’£</p><p>Hangzhou, Zhejiang, China</p><hr><h2 id="background" tabindex="-1"><a class="header-anchor" href="#background"><span>Background</span></a></h2><p>Linux å†…æ ¸æä¾› <code>perf_event</code> å­ç³»ç»Ÿï¼Œå…¶å¯¹åº”çš„å‰ç«¯å·¥å…·è¢«ç§°ä¸º <code>perf</code>ã€‚è¿™æ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ€§èƒ½å‰–æå·¥å…·ï¼Œè·Ÿéšå†…æ ¸ç‰ˆæœ¬è¢«ä¸æ–­æ›´æ–°ã€åŠ å¼ºã€‚<code>perf</code> åˆ©ç”¨äº† Linux å†…æ ¸ä¸­çš„å¤§é‡æ€§èƒ½è®¡æ•°å™¨ï¼Œæ”¯æŒå¯¹æŸä¸ªç‰¹å®šçº¿ç¨‹/è¿›ç¨‹ã€æ¯ä¸ªç‰¹å®š CPUã€æ¯ç§äº‹ä»¶å•ç‹¬è®¡æ•°ï¼›ä¹Ÿåˆ©ç”¨äº† <a href="https://www.kernel.org/doc/Documentation/trace/tracepoints.txt" target="_blank" rel="noopener noreferrer">Tracepoints</a>ï¼Œå³å†…æ ¸ä»£ç ä¸­ç‰¹å®šä½ç½®çš„é’©å­ï¼ˆHookï¼‰ï¼Œå¯ä»¥æ‰§è¡ŒåŠ¨æ€æ³¨å†Œçš„å‡½æ•°ï¼ˆProbeï¼‰ã€‚</p><h2 id="events" tabindex="-1"><a class="header-anchor" href="#events"><span>Events</span></a></h2><p><code>perf</code> æ”¯æŒå¯¹ä¸€ç³»åˆ—å¯è¡¡é‡çš„äº‹ä»¶è¿›è¡Œè§‚æµ‹ï¼Œä»ä¸­å¯ä»¥æ´æ‚‰ç¨‹åºçš„çƒ­ç‚¹ä»£ç å’Œæ€§èƒ½é—®é¢˜ã€‚è¿™äº›äº‹ä»¶çš„æ¥æºæœ‰ï¼š</p><ul><li>Software Eventï¼šæ¥è‡ªäº Linux å†…æ ¸ä»£ç ä¸­çš„è®¡æ•°å™¨ï¼Œæ¯”å¦‚ä¸Šä¸‹æ–‡åˆ‡æ¢æ¬¡æ•°</li><li>PMU (Performance Monitoring Unit) Hardware Eventï¼šæ¯ç§å¤„ç†å™¨å†…çš„æ€§èƒ½è®¡æ•°å™¨ï¼Œæ¯”å¦‚ L1 ç¼“å­˜ miss æ¬¡æ•°</li><li>Hardware Cache Eventï¼šä¸åŒ CPU çš„å…±æ€§æ€§èƒ½æŒ‡æ ‡ï¼Œå¯èƒ½ä¼šæ˜ å°„åˆ°ä¸åŒ CPU çš„ä¸åŒç¡¬ä»¶è®¡æ•°å™¨ä¸Šï¼Œæˆ–å¹²è„†ä¸å¯ç”¨</li><li>Tracepoint Event</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">$ perf list</span>
<span class="line"></span>
<span class="line">List of pre-defined events <span class="token punctuation">(</span>to be used <span class="token keyword">in</span> -e<span class="token punctuation">)</span>:</span>
<span class="line"></span>
<span class="line">  branch-misses                                      <span class="token punctuation">[</span>Hardware event<span class="token punctuation">]</span></span>
<span class="line">  bus-cycles                                         <span class="token punctuation">[</span>Hardware event<span class="token punctuation">]</span></span>
<span class="line">  cache-misses                                       <span class="token punctuation">[</span>Hardware event<span class="token punctuation">]</span></span>
<span class="line">  cache-references                                   <span class="token punctuation">[</span>Hardware event<span class="token punctuation">]</span></span>
<span class="line">  cpu-cycles OR cycles                               <span class="token punctuation">[</span>Hardware event<span class="token punctuation">]</span></span>
<span class="line">  instructions                                       <span class="token punctuation">[</span>Hardware event<span class="token punctuation">]</span></span>
<span class="line">  stalled-cycles-backend OR idle-cycles-backend      <span class="token punctuation">[</span>Hardware event<span class="token punctuation">]</span></span>
<span class="line">  stalled-cycles-frontend OR idle-cycles-frontend    <span class="token punctuation">[</span>Hardware event<span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">  alignment-faults                                   <span class="token punctuation">[</span>Software event<span class="token punctuation">]</span></span>
<span class="line">  bpf-output                                         <span class="token punctuation">[</span>Software event<span class="token punctuation">]</span></span>
<span class="line">  context-switches OR cs                             <span class="token punctuation">[</span>Software event<span class="token punctuation">]</span></span>
<span class="line">  cpu-clock                                          <span class="token punctuation">[</span>Software event<span class="token punctuation">]</span></span>
<span class="line">  cpu-migrations OR migrations                       <span class="token punctuation">[</span>Software event<span class="token punctuation">]</span></span>
<span class="line">  dummy                                              <span class="token punctuation">[</span>Software event<span class="token punctuation">]</span></span>
<span class="line">  emulation-faults                                   <span class="token punctuation">[</span>Software event<span class="token punctuation">]</span></span>
<span class="line">  major-faults                                       <span class="token punctuation">[</span>Software event<span class="token punctuation">]</span></span>
<span class="line">  minor-faults                                       <span class="token punctuation">[</span>Software event<span class="token punctuation">]</span></span>
<span class="line">  page-faults OR faults                              <span class="token punctuation">[</span>Software event<span class="token punctuation">]</span></span>
<span class="line">  task-clock                                         <span class="token punctuation">[</span>Software event<span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">  duration_time                                      <span class="token punctuation">[</span>Tool event<span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">  L1-dcache-load-misses                              <span class="token punctuation">[</span>Hardware cache event<span class="token punctuation">]</span></span>
<span class="line">  L1-dcache-loads                                    <span class="token punctuation">[</span>Hardware cache event<span class="token punctuation">]</span></span>
<span class="line">  L1-icache-load-misses                              <span class="token punctuation">[</span>Hardware cache event<span class="token punctuation">]</span></span>
<span class="line">  L1-icache-loads                                    <span class="token punctuation">[</span>Hardware cache event<span class="token punctuation">]</span></span>
<span class="line">  LLC-load-misses                                    <span class="token punctuation">[</span>Hardware cache event<span class="token punctuation">]</span></span>
<span class="line">  LLC-loads                                          <span class="token punctuation">[</span>Hardware cache event<span class="token punctuation">]</span></span>
<span class="line">  branch-load-misses                                 <span class="token punctuation">[</span>Hardware cache event<span class="token punctuation">]</span></span>
<span class="line">  branch-loads                                       <span class="token punctuation">[</span>Hardware cache event<span class="token punctuation">]</span></span>
<span class="line">  dTLB-load-misses                                   <span class="token punctuation">[</span>Hardware cache event<span class="token punctuation">]</span></span>
<span class="line">  dTLB-loads                                         <span class="token punctuation">[</span>Hardware cache event<span class="token punctuation">]</span></span>
<span class="line">  iTLB-load-misses                                   <span class="token punctuation">[</span>Hardware cache event<span class="token punctuation">]</span></span>
<span class="line">  iTLB-loads                                         <span class="token punctuation">[</span>Hardware cache event<span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">  ali_drw_21000/chi_rxdat/                           <span class="token punctuation">[</span>Kernel PMU event<span class="token punctuation">]</span></span>
<span class="line">  ali_drw_21000/chi_rxrsp/                           <span class="token punctuation">[</span>Kernel PMU event<span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="references" tabindex="-1"><a class="header-anchor" href="#references"><span>References</span></a></h2><p><a href="https://perf.wiki.kernel.org/index.php/Main_Page" target="_blank" rel="noopener noreferrer">Kernel Wiki - perf: Linux profiling with performance counters</a></p><p><a href="https://perf.wiki.kernel.org/index.php/Tutorial" target="_blank" rel="noopener noreferrer">Tutorial - Linux kernel profiling with perf</a></p>`,14)]))}const o=a(p,[["render",i],["__file","Linux Perf Event.html.vue"]]),r=JSON.parse('{"path":"/notes/Performance/Linux%20Perf%20Event.html","title":"Linux Performance - Perf Event","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"Background","slug":"background","link":"#background","children":[]},{"level":2,"title":"Events","slug":"events","link":"#events","children":[]},{"level":2,"title":"References","slug":"references","link":"#references","children":[]}],"git":{},"filePathRelative":"notes/Performance/Linux Perf Event.md"}');export{o as comp,r as data};
